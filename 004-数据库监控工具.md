## 004-数据库监控工具

### （一）会话函数

opengauss包含一些内置的会话函数，可以通过调用函数获取一些数据库的基本信息。

| **函数**           | **返回值** | **用途**                    |
| ------------------ | ---------- | --------------------------- |
| current_database() | 数据库名   | 返回当前数据库名            |
| current_query()    | 查询语句   | 返回当前执行的查询文本      |
| current_user       | 用户名     | 当前环境下的用户名          |
| pg_backend_pid()   | 进程号     | 显示当前连接的进程号/线程号 |
| version()          | 版本信息   | 返回Postgresql版本信息      |

##### 1.current_database()  

获取数据库名：

![image-20230731172625636](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731172625636.png)

##### 2.current_query()

获取当前的查询语句

![image-20230731172713440](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731172713440.png)

##### 3.current_user

获取当前的用户名

![image-20230731172753760](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731172753760.png)

##### 4.pg_backend_pid()

获取当前连接的进程号

![image-20230731172839158](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731172839158.png)



##### 5.version()

获取当前opengauss数据库的版本信息

![image-20230731173026794](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731173026794.png)



### （二）系统表 pg_stat_activity

PG_STAT_ACTIVITY视图显示和当前用户查询相关的信息，字段保存的是上一次执行的信息。视图里面每行都是一个DB连接，及其状态

##### 1.查询当前的连接数

```sql
select count(*) from pg_stat_activity
```

![image-20230731171049767](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731171049767.png)

##### 2.查询当前连接数（带条件）

```sql
select count(*) from pg_stat_activity where state='idle'
```



![image-20230731171249333](http://foolcorn-image.oss-cn-shenzhen.aliyuncs.com/img/image-20230731171249333.png)

其中state字段代表后台当前总体状态。可能值是：

- active：后台正在执行一个查询。
- idle：后台正在等待一个新的客户端命令。
- idle in transaction：后台在事务中，但事务中没有语句在执行。
- idle in transaction (aborted)：后台在事务中，但事务中有语句执行失败。
- fastpath function call：后台正在执行一个fast-path函数。
- disabled：如果后台禁用track_activities，则报告这个状态。



##### 3.查询正在处理的SQL

```sql
select * from pg_stat_activity where state='active'
```

该查询一般是针对于大数据的全表扫描，一般的sql语句会很快执行完



##### 4.查询当前执行长时间的SQL

```sql
select * from pg_stat_activity where state='active' order by query_start;
```

query_start字段是当前活跃查询的开始时间， 如果state的值不是active，则这个值是上一个查询的开始时间。

通过对query_start字段进行order操作，可以将长时间sql作业按时间顺序进行显示。



##### 5.高并发时查询当前处理最多的SQL

```sql
select query, count(*) as num from pg_stat_activity where state='idle' group by query order by num desc;
```

把这条语句拆解一下：

query字段是该后台的最新查询。如果state状态是active（活跃的），此字段显示当前正在执行的查询。所有其他情况表示上一个查询。

由于where条件是state='idle'因此会显示所有历史查询结果

由于group by的对象是query

因此会按不同的query-sql语句进行分组，从而得到该sql的查询次数，并命名为num

之后会按num的数量进行降序排序，最上方的是处理最多的sql语句



### （三）系统表 pg_locks

PG_LOCKS视图存储各打开事务所持有的锁信息。

该表字段如下：

| 名称               | 类型     | 引用                                                         | 描述                                                         |
| :----------------- | :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| locktype           | text     | -                                                            | 被锁定对象的类型：relation、extend、page、tuple、transactionid、virtualxid、object、userlock、advisory。 |
| database           | oid      | PG_DATABASE.oid | 被锁定对象所在数据库的OID。如果被锁定的对象是共享对象，则OID为0。如果是一个事务ID，则为NULL。 |
| relation           | oid      | PG_CLASS.oid | 关系的OID，如果锁定的对象不是关系，也不是关系的一部分，则为NULL。 |
| page               | integer  | -                                                            | 关系内部的页面编号，如果对象不是关系页或者不是行页，则为NULL。 |
| tuple              | smallint | -                                                            | 页面里边的行编号，如果对象不是行，则为NULL。                 |
| bucket             | integer  | -                                                            | 子表对应的bucket number。如果目标不是表的话，则为NULL。      |
| virtualxid         | text     | -                                                            | 事务的虚拟ID，如果对象不是一个虚拟事务ID，则为NULL。         |
| transactionid      | xid      | -                                                            | 事务的ID，如果对象不是一个事务ID，则为NULL。                 |
| classid            | oid      | PG_CLASS.oid | 包含该对象的系统表的OID，如果对象不是普通的数据库对象，则为NULL。 |
| objid              | oid      | -                                                            | 对象在其系统表内的OID，如果对象不是普通数据库对象，则为NULL。 |
| objsubid           | smallint | -                                                            | 对于表的一个字段，这是字段编号；对于其他对象类型，这个字段是0；如果这个对象不是普通数据库对象，则为NULL。 |
| virtualtransaction | text     | -                                                            | 持有此锁或者在等待此锁的事务的虚拟ID。                       |
| pid                | bigint   | -                                                            | 持有或者等待这个锁的服务器线程的逻辑ID。如果锁是被一个预备事务持有的，则为NULL。 |
| sessionid          | bigint   | -                                                            | 持有或者等待这个锁的会话ID。                                 |
| mode               | text     | -                                                            | 这个线程持有的或者是期望的锁模式。                           |
| granted            | boolean  | -                                                            | 如果锁是持有锁，则为TRUE。如果锁是等待锁，则为FALSE。        |
| fastpath           | boolean  | -                                                            | 如果通过fast-path获得锁，则为TRUE；如果通过主要的锁表获得，则为FALSE。 |
| locktag            | text     | -                                                            | 会话等待锁信息，可通过locktag_decode()函数解析。             |
| global_sessionid   | text     |                                                              | 全局会话ID。                                                 |

##### 1.查询某表上存在的锁

```sql
select a.locktype,a.database,a.pid,a.mode,a.relation,b.relname
from pg_locks a pg_class b where a.relation = b.oid and upper(b.relname) = 'TABLE_NAME’;
```

这里涉及到多表连接查询，引入pg_class表的原因在于需要获取table_name到表的oid的映射关系。

因为pg_locks只有oid类型的relation字段



##### 2.利用某个锁的pid查询对应的SQL

```sql
select usename,current_query,query_start,pid,client_addr from pg_stat_activity where pid=$pid;
```

在pg_locks表中pid为持有或者等待这个锁的服务器线程的逻辑ID

因此可以通过pid在pg_stat_activity表中查询该线程更详细的信息。包括客户端ip地址client_addr

2和1可以写成一句sql

```sql
select a.locktype,a.database,a.pid,a.mode,a.relation,b.relname,c.usename,c.query,c.query_start,c.client_addr
from pg_locks a,pg_class b,pg_stat_activity c
Where a.relation = b.oid and a.pid = c.pid  and upper(b.relname) = 'TABLE_NAME';
```



##### 3.查询存在锁的数据表

```sql
select a.locktype,a.database,a.pid,a.mode,a.relation,b.relname -- ,sa.*
from pg_locks a
join pg_class b on a.relation = b.oid 
inner join  pg_stat_activity sa on a.pid=sa.pid
```

这个SQL查询语句的目的是检索当前正在被锁定的数据库对象以及与之相关的进程信息，并返回完整的结果集。逐个解释每个部分的含义：

- `SELECT a.locktype, a.database, a.pid, a.mode, a.relation, b.relname, sa.*`: 这部分指定了要返回的结果列。它包括锁的类型（locktype）、数据库名称（database）、进程ID（pid）、锁的模式（mode）、关联的数据库对象（relation）、对象名称（relname），以及与锁定进程相关的所有列（sa.*）。
- `FROM pg_locks a`: 这是查询的主要来源表，`pg_locks`是一个系统目录表，用于存储当前数据库中的锁信息。
- `JOIN pg_class b ON a.relation = b.oid`: 这是一个连接操作，将`pg_locks`表中的`relation`列与`pg_class`表中的`oid`列进行关联，以获取锁定的数据库对象的相关信息。`pg_class`是一个系统目录表，用于存储数据库中的表和其他对象的信息。
- `INNER JOIN pg_stat_activity sa ON a.pid = sa.pid`: 这是另一个连接操作，将`pg_locks`表中的`pid`列与`pg_stat_activity`表中的`pid`列进行关联，以获取与锁定进程相关的活动信息。`pg_stat_activity`是一个系统视图，提供了当前活动会话和进程的信息。

综合起来，这个查询语句的作用是获取当前数据库中正在被锁定的对象的相关信息，包括锁的类型、数据库名称、进程ID、锁的模式、关联的数据库对象、对象名称以及与锁定进程相关的所有详细信息。



##### 4.查询锁表并解锁

```sql
select pid, state, usename, query, query_start
from pg_stat_activity
where pid in (
    select pid from pg_locks l
                        join pg_class t on l.relation = t.oid
        and t.relkind = 'r’);
```

该语句查询所有锁住的普通表和锁住该表的pid以及相关的sql语句

其中pg_class的relkind字段是表的类型

- r：表示普通表。
- i：表示索引。
- I：表示分区表GLOBAL索引。
- S：表示序列。
- L：表示Large序列。
- v：表示视图。
- c：表示复合类型。
- t：表示TOAST表。
- f：表示外表。
- m：表示物化视图。



##### 5.利用查询的pid进行解锁

取消后台操作，回滚未提交事务

```sql
SELECT pg_cancel_backend(pid)
```

中断session，回滚未提交事务

```sql
SELECT pg_terminate_backend(pid)
```



### （四）性能视图 pg_stat_*

opengauss提供一系列pg_stat_类型的视图，用于记录数据库中的统计数据

- PG_STATS：提供对存储在pg_statistic表里面的单列统计信息的访问。该视图记录的统计信息更新时间间隔由参数autovacuum_naptime设置。

- PG_STAT_ACTIVITY：显示和当前用户查询相关的信息，字段保存的是上一次执行的信息。

- PG_STAT_ACTIVITY_NG：显示在当前用户所属的逻辑数据库实例下，所有查询的相关信息。

- PG_STAT_ALL_INDEXES：该视图包含当前数据库中的每个索引行，显示访问特定索引的统计。

  索引可以通过简单的索引扫描或“位图”索引扫描进行使用。位图扫描中几个索引的输出可以通过AND或者OR规则进行组合， 因此当使用位图扫描的时候，很难将独立堆行抓取与特定索引进行组合，因此，一个位图扫描增加pg_stat_all_indexes.idx_tup_read使用索引计数，并且增加pg_stat_all_tables.idx_tup_fetch表计数，但不影响pg_stat_all_indexes.idx_tup_fetch。

- PG_STAT_ALL_TABLES：该视图包含当前数据库中每个表的一行（包括TOAST表），显示访问特定表的统计信息。

- PG_STAT_BAD_BLOCK：该视图显示自节点启动后，读取数据时出现Page/CU校验失败的统计信息。

- PG_STAT_BGWRITER：该视图显示关于后端写进程活动的统计信息。

- PG_STAT_DATABASE：该视图包含openGauss中每个数据库的数据库统计信息。

- PG_STAT_DATABASE_CONFLICTS：显示数据库冲突状态的统计信息。

- PG_STAT_USER_FUNCTIONS：显示命名空间中用户自定义函数（函数语言为非内部语言）的状态信息。

- PG_STAT_USER_INDEXES：显示数据库中用户自定义普通表和toast表的索引状态信息。

- PG_STAT_USER_TABLES：显示所有命名空间中用户自定义普通表和toast表的状态信息。

- PG_STAT_REPLICATION：描述日志同步状态信息，例如发起端发送日志位置，接收端接收日志位置等。

- PG_STAT_SUBSCRIPTION：获取订阅的详细同步信息。

- PG_STAT_SYS_INDEXES：显示pg_catalog、information_schema模式中所有系统表的索引状态信息。

- PG_STAT_SYS_TABLES：显示pg_catalog、information_schema模式的所有命名空间中系统表的统计信息。

- PG_STAT_XACT_ALL_TABLES：显示命名空间中所有普通表和toast表的事务状态信息。

- PG_STAT_XACT_SYS_TABLES：显示命名空间中系统表的事务状态信息。

- PG_STAT_XACT_USER_FUNCTIONS：包含每个函数的执行的统计信息。

- PG_STAT_XACT_USER_TABLES：显示命名空间中用户表的事务状态信息。



#### pg_stat_bgwriter

该视图监控后端写进程活动的统计信息。也就是磁盘的写入情况。

字段如下所示：

| 名称                  | 类型                     | 描述                                                         |
| :-------------------- | :----------------------- | :----------------------------------------------------------- |
| checkpoints_timed     | bigint                   | 执行的定期检查点数。                                         |
| checkpoints_req       | bigint                   | 执行的需求检查点数。                                         |
| checkpoint_write_time | double precision         | 花费在检查点处理部分的时间总量，其中文件被写入到磁盘，以毫秒为单位。 |
| checkpoint_sync_time  | double precision         | 花费在检查点处理部分的时间总量，其中文件被同步到磁盘，以毫秒为单位。 |
| buffers_checkpoint    | bigint                   | 检查点写缓冲区数量。                                         |
| buffers_clean         | bigint                   | 后端写进程写缓冲区数量。                                     |
| maxwritten_clean      | bigint                   | 后端写进程停止清理扫描时间数，因为它写了太多缓冲区。         |
| buffers_backend       | bigint                   | 通过后端直接写缓冲区数。                                     |
| buffers_backend_fsync | bigint                   | 后端不得不执行自己的fsync调用的时间数（通常后端写进程处理这些即使后端确实自己写）。 |
| buffers_alloc         | bigint                   | 分配的缓冲区数量。                                           |
| stats_reset           | timestamp with time zone | 这些统计被重置的时间。                                       |



#### pg_stat_replication

该视图用于监控流复制，记录了备库连接信息及流复制的状态。

字段如下所示：

| 名称                     | 类型                     | 描述                                       |
| :----------------------- | :----------------------- | :----------------------------------------- |
| pid                      | bigint                   | 线程的PID。                                |
| usesysid                 | oid                      | 用户系统ID。                               |
| usename                  | name                     | 用户名。                                   |
| application_name         | text                     | 程序名称。                                 |
| client_addr              | inet                     | 客户端地址。                               |
| client_hostname          | text                     | 客户端名。                                 |
| client_port              | integer                  | 客户端端口。                               |
| backend_start            | timestamp with time zone | 程序启动时间。                             |
| state                    | text                     | 日志复制的状态：追赶状态。一致的流状态。   |
| sender_sent_location     | text                     | 发送端发送日志位置。                       |
| receiver_write_location  | text                     | 接收端write日志位置。                      |
| receiver_flush_location  | text                     | 接收端flush日志位置。                      |
| receiver_replay_location | text                     | 接收端replay日志位置。                     |
| sync_priority            | integer                  | 同步复制的优先级（0表示异步）。            |
| sync_state               | text                     | 同步状态：异步复制。同步复制。潜在同步者。 |



#### pg_stat_statements

该视图应该是vastbase专属，opengauss没有提供

字段如下所示：

| **名称**            | **类型**          | **描述**                                                     |
| ------------------- | ----------------- | ------------------------------------------------------------ |
| userid              | oid               | 执行该语句的用户的 OID                                       |
| dbid                | oid               | 执行的语句                                                   |
| query               | bigint            | 内部哈希码，从语句的解析树计算得来                           |
| query               | text              | 语句的文本形式                                               |
| calls               | bigint            | 被执行的次数                                                 |
| total_time          | double  precision | 在该语句中花费的总时间，以毫秒计                             |
| rows                | bigint            | 该语句检索或影响的行总数                                     |
| shared_blks_hit     | bigint            | 该语句造成的共享块缓冲命中总数                               |
| shared_blks_read    | bigint            | 该语句读取的共享块的总数                                     |
| shared_blks_dirtied | bigint            | 该语句弄脏的共享块的总数                                     |
| shared_blks_written | bigint            | 该语句写入的共享块的总数                                     |
| local_blks_hit      | bigint            | 该语句造成的本地块缓冲命中总数                               |
| local_blks_read     | bigint            | 该语句读取的本地块的总数                                     |
| local_blks_dirtied  | bigint            | 该语句弄脏的本地块的总数                                     |
| local_blks_written  | bigint            | 该语句写入的本地块的总数                                     |
| temp_blks_read      | bigint            | 该语句读取的临时块的总数                                     |
| temp_blks_written   | bigint            | 该语句写入的临时块的总数                                     |
| blk_read_time       | double  precision | 该语句花在读取块上的总时间，以毫秒计（如果track_io_timing被启用，否则为零） |
| blk_write_time      | double  precision | 该语句花在写入块上的总时间，以毫秒计（如果track_io_timing被启用，否则为零） |

##### 1.查询最耗IO的SQL，单次调用最耗IO的SQL TOP 5

```sql
select userid, dbid, query from pg_stat_statements order by (blk_read_time+blk_write_time)/calls desc limit 5;  
```



##### 2.查询总最耗IO SQL TOP 5

```sql
select userid, dbid, query from pg_stat_statements order by (blk_read_time+blk_write_time) desc limit 5;  
```



##### 3.最耗时 SQL，单次调用最耗时 SQL TOP 5

```sql
select userid, dbid,total_time/calls avg_time, query from pg_stat_statements order by avg_time desc limit 5;  
```



##### 4.总最耗时 SQL TOP 5

```sql
select userid, dbid, query from pg_stat_statements order by total_time desc limit 5;  
```



##### 5.最耗共享内存的sql

```sql
select userid, dbid, query from pg_stat_statements order by (shared_blks_hit+shared_blks_dirtied) desc limit 5;  
```



##### 6.最耗临时空间 SQL

```sql
select userid, dbid, query from pg_stat_statements order by temp_blks_written desc limit 5;
```



### （五）io视图pg_statio_*

opengauss提供一系列pg_statio_类型的视图，统计各个对象上发生的I/O情况

- PG_STATIO_ALL_INDEXES：包含当前数据库中的每个索引行，显示特定索引的I/O的统计。
- PG_STATIO_ALL_SEQUENCES：包含当前数据库中每个序列的I/O的统计信息。
- PG_STATIO_ALL_TABLES：包含当前数据库中每个表（包括TOAST表）的I/O统计信息。
- PG_STATIO_SYS_INDEXES：显示命名空间中所有系统表索引的IO状态信息。
- PG_STATIO_SYS_SEQUENCES：显示命名空间中所有序列的IO状态信息。
- PG_STATIO_SYS_TABLES：显示命名空间中所有系统表的IO状态信息。
- PG_STATIO_USER_INDEXES：显示命名空间中所有用户关系表索引的IO状态信息。
- PG_STATIO_USER_SEQUENCES：显示命名空间中所有用户关系表类型为序列的IO状态信息。
- PG_STATIO_USER_TABLES：显示命名空间中所有用户关系表的IO状态信息。



### （六）内视图DBE_PERF

DBE_PERF Schema内视图主要用来诊断性能问题，也是WDR Snapshot的数据来源。数据库安装后，默认只有初始用户具有模式dbe_perf的权限。若是由旧版本升级而来，为保持权限的前向兼容，模式dbe_perf的权限与旧版本保持一致。从OS、Instance、Memory等多个维度划分组织视图，并且符合如下命名规范：

- GLOBAL_开头的视图，代表从数据库节点请求数据，并将数据追加对外返回，不会处理数据。
- SUMMARY_开头的视图，代表是将openGauss内的数据概述，多数情况下是返回数据库节点（有时只有数据库主节点的）的数据，会对数据进行加工和汇聚。
- 非这两者开头的视图，一般代表本地视图，不会向其它数据库节点请求数据。

#### 1. OS

#####  OS_RUNTIME

显示当前操作系统运行的状态信息。

| **名称**   | **类型** | **描述**                           |
| :--------- | :------- | :--------------------------------- |
| id         | integer  | 编号。                             |
| name       | text     | 操作系统运行状态名称。             |
| value      | numeric  | 操作系统运行状态值。               |
| comments   | text     | 操作系统运行状态注释。             |
| cumulative | boolean  | 操作系统运行状态的值是否为累加值。 |



#####  GLOBAL_OS_RUNTIME

提供openGauss中所有正常节点下的操作系统运行状态信息。

| **名称**   | **类型** | **描述**                           |
| :--------- | :------- | :--------------------------------- |
| node_name  | name     | 数据库进程名称。                   |
| id         | integer  | 编号。                             |
| name       | text     | 操作系统运行状态名称。             |
| value      | numeric  | 操作系统运行状态值。               |
| comments   | text     | 操作系统运行状态注释。             |
| cumulative | boolean  | 操作系统运行状态的值是否为累加值。 |



#####  OS_THREADS

提供当前节点下所有线程的状态信息。

| node_name     | text                     | 数据库进程名称。               |
| ------------- | ------------------------ | ------------------------------ |
| pid           | bigint                   | 数据库进程中正在运行的线程号。 |
| lwpid         | integer                  | 与pid对应的轻量级线程号。      |
| thread_name   | text                     | 与pid对应的线程名称。          |
| creation_time | timestamp with time zone | 与pid对应的线程创建的时间。    |



#####  GLOBAL_OS_THREADS

提供openGauss中所有正常节点下的线程状态信息。

| node_name     | text                     | 数据库进程名称。                 |
| ------------- | ------------------------ | -------------------------------- |
| pid           | bigint                   | 当前节点进程中正在运行的线程号。 |
| lwpid         | integer                  | 与pid对应的轻量级线程号。        |
| thread_name   | text                     | 与pid对应的线程名称。            |
| creation_time | timestamp with time zone | 与pid对应的线程创建的时间。      |



#### 2. Instance

##### INSTANCE_TIME

提供当前节点下的各种时间消耗信息，主要分为以下类型：

- DB_TIME：作业在多核下的有效时间花销。
- CPU_TIME：CPU的时间花销。
- EXECUTION_TIME：执行器内的时间花销。
- PARSE_TIME：SQL解析的时间花销。
- PLAN_TIME：生成Plan的时间花销。
- REWRITE_TIME：SQL重写的时间花销。
- PL_EXECUTION_TIME：plpgsql（存储过程）执行的时间花销。
- PL_COMPILATION_TIME：plpgsql（存储过程）编译的时间花销。
- NET_SEND_TIME：网络上的时间花销。
- DATA_IO_TIME：IO上的时间花销。

| **名称**  | **类型** | **描述**               |
| :-------- | :------- | :--------------------- |
| stat_id   | integer  | 统计编号。             |
| stat_name | text     | 类型名称。             |
| value     | bigint   | 时间值（单位：微秒）。 |



##### GLOBAL_INSTANCE_TIME

提供openGauss中所有正常节点下的各种时间消耗信息（时间类型见instance_time视图）。

| **名称**  | **类型** | **描述**               |
| :-------- | :------- | :--------------------- |
| node_name | name     | 数据库进程的名称。     |
| stat_id   | integer  | 统计编号。             |
| stat_name | text     | 类型名称。             |
| value     | bigint   | 时间值（单位：微秒）。 |



#### 3. Memory

##### MEMORY_NODE_DETAIL

显示某个数据库节点内存使用情况。

内存名称类型如下：

- max_process_memory：openGauss实例所占用的内存大小。
- process_used_memory：进程所使用的内存大小。
- max_dynamic_memory：最大动态内存。
- dynamic_used_memory：已使用的动态内存。
- dynamic_peak_memory：内存的动态峰值。
- dynamic_used_shrctx：最大动态共享内存上下文。
- dynamic_peak_shrctx：共享内存上下文的动态峰值。
- max_shared_memory：最大共享内存。
- shared_used_memory：已使用的共享内存。
- max_cstore_memory：列存所允许使用的最大内存。
- cstore_used_memory：列存已使用的内存大小。
- max_sctpcomm_memory：sctp通信所允许使用的最大内存。
- sctpcomm_used_memory：sctp通信已使用的内存大小。
- sctpcomm_peak_memory：sctp通信的内存峰值。
- other_used_memory：其他已使用的内存大小。
- gpu_max_dynamic_memory：GPU最大动态内存。
- gpu_dynamic_used_memory：GPU已使用的动态内存。
- gpu_dynamic_peak_memory：GPU内存的动态峰值。
- pooler_conn_memory：链接池申请内存计数。
- pooler_freeconn_memory：链接池空闲连接的内存计数。
- storage_compress_memory：存储模块压缩使用的内存大小。
- udf_reserved_memory：UDF预留的内存大小。

| **名称**     | **类型** | **描述**                   |
| :----------- | :------- | :------------------------- |
| nodename     | text     | 节点名称。                 |
| memorytype   | text     | 内存的名称。               |
| memorymbytes | integer  | 内存使用的大小，单位为MB。 |



##### GLOBAL_MEMORY_NODE_DETAIL

显示当前openGauss中所有正常节点下的内存使用情况。

| **名称**     | **类型** | **描述**                   |
| :----------- | :------- | :------------------------- |
| nodename     | text     | 数据库进程名称。           |
| memorytype   | text     | 内存使用的名称。           |
| memorymbytes | integer  | 内存使用的大小，单位为MB。 |



##### GS_SHARED_MEMORY_DETAIL

查询当前节点所有已产生的共享内存上下文的使用信息。

| **名称**    | **类型** | **描述**                         |
| :---------- | :------- | :------------------------------- |
| contextname | text     | 内存上下文的名称。               |
| level       | smallint | 内存上下文的级别。               |
| parent      | text     | 上级内存上下文。                 |
| totalsize   | bigint   | 共享内存总大小（单位：字节）。   |
| freesize    | bigint   | 共享内存剩余大小（单位：字节）。 |
| usedsize    | bigint   | 共享内存使用大小（单位：字节）。 |



##### GLOBAL_SHARED_MEMORY_DETAIL

查询openGauss中所有正常节点下的共享内存上下文的使用信息。

| **名称**    | **类型** | **描述**                         |
| :---------- | :------- | :------------------------------- |
| node_name   | name     | 数据库进程名称。                 |
| contextname | text     | 内存上下文的名称。               |
| level       | smallint | 内存上下文的级别。               |
| parent      | text     | 上级内存上下文。                 |
| totalsize   | bigint   | 共享内存总大小（单位：字节）。   |
| freesize    | bigint   | 共享内存剩余大小（单位：字节）。 |
| usedsize    | bigint   | 共享内存使用大小（单位：字节）。 |



#### 4. File

##### FILE_IOSTAT

通过对数据文件IO的统计，反映数据的IO性能，用以发现IO操作异常等性能问题。

| **名称**  | **类型** | **描述**                           |
| :-------- | :------- | :--------------------------------- |
| filenum   | oid      | 文件标识。                         |
| dbid      | oid      | 数据库标识。                       |
| spcid     | oid      | 表空间标识。                       |
| phyrds    | bigint   | 读物理文件的数目。                 |
| phywrts   | bigint   | 写物理文件的数目。                 |
| phyblkrd  | bigint   | 读物理文件块的数目。               |
| phyblkwrt | bigint   | 写物理文件块的数目。               |
| readtim   | bigint   | 读文件的总时长（单位：微秒）。     |
| writetim  | bigint   | 写文件的总时长（单位：微秒）。     |
| avgiotim  | bigint   | 读写文件的平均时长（单位：微秒）。 |
| lstiotim  | bigint   | 最后一次读文件时长（单位：微秒）。 |
| miniotim  | bigint   | 读写文件的最小时长（单位：微秒）。 |
| maxiowtm  | bigint   | 读写文件的最大时长（单位：微秒）。 |



##### SUMMARY_FILE_IOSTAT

通过openGauss内对数据文件汇聚IO的统计，反映数据的IO性能，用以发现IO操作异常等性能问题。

| **名称**  | **类型** | **描述**                           |
| :-------- | :------- | :--------------------------------- |
| filenum   | oid      | 文件标识。                         |
| dbid      | oid      | 数据库标识。                       |
| spcid     | oid      | 表空间标识。                       |
| phyrds    | numeric  | 读物理文件的数目。                 |
| phywrts   | numeric  | 写物理文件的数目。                 |
| phyblkrd  | numeric  | 读物理文件块的数目。               |
| phyblkwrt | numeric  | 写物理文件块的数目。               |
| readtim   | numeric  | 读文件的总时长（单位：微秒）。     |
| writetim  | numeric  | 写文件的总时长（单位：微秒）。     |
| avgiotim  | bigint   | 读写文件的平均时长（单位：微秒）。 |
| lstiotim  | bigint   | 最后一次读文件时长（单位：微秒）。 |
| miniotim  | bigint   | 读写文件的最小时长（单位：微秒）。 |
| maxiowtm  | bigint   | 读写文件的最大时长（单位：微秒）。 |



##### GLOBAL_FILE_IOSTAT

得到所有节点上的数据文件IO统计信息。

| **名称**  | **类型** | **描述**                           |
| :-------- | :------- | :--------------------------------- |
| node_name | name     | 数据库进程名称。                   |
| filenum   | oid      | 文件标识。                         |
| dbid      | oid      | 数据库标识。                       |
| spcid     | oid      | 表空间标识。                       |
| phyrds    | bigint   | 读物理文件的数目。                 |
| phywrts   | bigint   | 写物理文件的数目。                 |
| phyblkrd  | bigint   | 读物理文件块的数目。               |
| phyblkwrt | bigint   | 写物理文件块的数目。               |
| readtim   | bigint   | 读文件的总时长（单位：微秒）。     |
| writetim  | bigint   | 写文件的总时长（单位：微秒）。     |
| avgiotim  | bigint   | 读写文件的平均时长（单位：微秒）。 |
| lstiotim  | bigint   | 最后一次读文件时长（单位：微秒）。 |
| miniotim  | bigint   | 读写文件的最小时长（单位：微秒）。 |
| maxiowtm  | bigint   | 读写文件的最大时长（单位：微秒）。 |



##### FILE_REDO_IOSTAT

本节点Redo（WAL）相关的统计信息。

| **名称**  | **类型** | **描述**                                             |
| :-------- | :------- | :--------------------------------------------------- |
| phywrts   | bigint   | 向wal buffer中写的次数。                             |
| phyblkwrt | bigint   | 向wal buffer中写的block的块数。                      |
| writetim  | bigint   | 向xlog文件中写操作的时间（单位：微秒）。             |
| avgiotim  | bigint   | 平均写xlog的时间（writetim/phywrts）（单位：微秒）。 |
| lstiotim  | bigint   | 最后一次写xlog的时间（单位：微秒）。                 |
| miniotim  | bigint   | 最小的写xlog时间（单位：微秒）。                     |
| maxiowtm  | bigint   | 最大的写xlog时间（单位：微秒）。                     |



##### SUMMARY_FILE_REDO_IOSTAT

openGauss内汇聚所有的Redo（WAL）相关的统计信息。

| **名称**  | **类型** | **描述**                                             |
| :-------- | :------- | :--------------------------------------------------- |
| phywrts   | numeric  | 向wal buffer中写的次数。                             |
| phyblkwrt | numeric  | 向wal buffer中写的block的块数。                      |
| writetim  | numeric  | 向xlog文件中写操作的时间（单位：微秒）。             |
| avgiotim  | bigint   | 平均写xlog的时间（writetim/phywrts）（单位：微秒）。 |
| lstiotim  | bigint   | 最后一次写xlog的时间（单位：微秒）。                 |
| miniotim  | bigint   | 最小的写xlog时间（单位：微秒）。                     |
| maxiowtm  | bigint   | 最大的写xlog时间（单位：微秒）。                     |



##### GLOBAL_FILE_REDO_IOSTAT

得到openGauss内各节点的Redo（WAL）相关统计信息。

| **名称**  | **类型** | **描述**                                             |
| :-------- | :------- | :--------------------------------------------------- |
| node_name | name     | 数据库进程名称。                                     |
| phywrts   | bigint   | 向wal buffer中写的次数。                             |
| phyblkwrt | bigint   | 向wal buffer中写的block的块数。                      |
| writetim  | bigint   | 向xlog文件中写操作的时间（单位：微秒）。             |
| avgiotim  | bigint   | 平均写xlog的时间（writetim/phywrts）（单位：微秒）。 |
| lstiotim  | bigint   | 最后一次写xlog的时间（单位：微秒）。                 |
| miniotim  | bigint   | 最小的写xlog时间（单位：微秒）。                     |
| maxiowtm  | bigint   | 最大的写xlog时间（单位：微秒）。                     |



##### LOCAL_REL_IOSTAT

获取当前节点中数据文件IO状态的累计值，显示为所有数据文件IO状态的总和。

| **名称**  | **类型** | **描述**               |
| :-------- | :------- | :--------------------- |
| phyrds    | bigint   | 读物理文件的数目。     |
| phywrts   | bigint   | 写物理文件的数目。     |
| phyblkrd  | bigint   | 读物理文件的块的数目。 |
| phyblkwrt | bigint   | 写物理文件的块的数目。 |



##### GLOBAL_REL_IOSTAT

获取所有节点上的数据文件IO统计信息。

| **名称**  | **类型** | **描述**             |
| :-------- | :------- | :------------------- |
| node_name | name     | 数据库进程名称。     |
| phyrds    | bigint   | 读物理文件的数目。   |
| phywrts   | bigint   | 写物理文件的数目。   |
| phyblkrd  | bigint   | 读物理文件块的数目。 |
| phyblkwrt | bigint   | 写物理文件块的数目。 |



##### SUMMARY_REL_IOSTAT

获取所有节点上的数据文件IO统计信息。

| **名称**  | **类型** | **描述**               |
| :-------- | :------- | :--------------------- |
| phyrds    | numeric  | 读物理文件的数目。     |
| phywrts   | numeric  | 写物理文件的数目。     |
| phyblkrd  | numeric  | 读物理文件的块的数目。 |
| phyblkwrt | numeric  | 写物理文件的块的数目。 |



#### 5. Object

##### STAT_USER_TABLES

显示当前节点所有命名空间中用户自定义普通表的状态信息。

| **名称**          | **类型**                 | **描述**                                            |
| :---------------- | :----------------------- | :-------------------------------------------------- |
| relid             | oid                      | 表的OID。                                           |
| schemaname        | name                     | 该表的模式名。                                      |
| relname           | name                     | 表名。                                              |
| seq_scan          | bigint                   | 该表发起的顺序扫描数。                              |
| seq_tup_read      | bigint                   | 顺序扫描抓取的活跃行数。                            |
| idx_scan          | bigint                   | 该表发起的索引扫描数。                              |
| idx_tup_fetch     | bigint                   | 索引扫描抓取的活跃行数。                            |
| n_tup_ins         | bigint                   | 插入行数。                                          |
| n_tup_upd         | bigint                   | 更新行数。                                          |
| n_tup_del         | bigint                   | 删除行数。                                          |
| n_tup_hot_upd     | bigint                   | HOT更新行数（即没有更新所需的单独索引）。           |
| n_live_tup        | bigint                   | 估计活跃行数。                                      |
| n_dead_tup        | bigint                   | 估计死行数。                                        |
| last_vacuum       | timestamp with time zone | 最后一次该表是手动清理的（不计算VACUUM FULL）时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                |
| last_analyze      | timestamp with time zone | 上次手动分析该表的时间。                            |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析的时间。                |
| vacuum_count      | bigint                   | 该表被手动清理的次数（不计算VACUUM FULL）。         |
| autovacuum_count  | bigint                   | 该表被autovacuum清理的次数。                        |
| analyze_count     | bigint                   | 该表被手动分析的次数。                              |
| autoanalyze_count | bigint                   | 该表被autovacuum守护进程分析的次数。                |



##### SUMMARY_STAT_USER_TABLES

openGauss内汇聚所有命名空间中用户自定义普通表的状态信息。

| **名称**          | **类型**                 | **描述**                                            |
| :---------------- | :----------------------- | :-------------------------------------------------- |
| schemaname        | name                     | 此表的模式名。                                      |
| relname           | name                     | 表名。                                              |
| seq_scan          | numeric                  | 此表发起的顺序扫描数。                              |
| seq_tup_read      | numeric                  | 顺序扫描抓取的活跃行数。                            |
| idx_scan          | numeric                  | 此表发起的索引扫描数。                              |
| idx_tup_fetch     | numeric                  | 索引扫描抓取的活跃行数。                            |
| n_tup_ins         | numeric                  | 插入行数。                                          |
| n_tup_upd         | numeric                  | 更新行数。                                          |
| n_tup_del         | numeric                  | 删除行数。                                          |
| n_tup_hot_upd     | numeric                  | HOT更新行数（即没有更新所需的单独索引）。           |
| n_live_tup        | numeric                  | 估计活跃行数。                                      |
| n_dead_tup        | numeric                  | 估计死行数。                                        |
| last_vacuum       | timestamp with time zone | 最后一次此表是手动清理的（不计算VACUUM FULL）时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                |
| last_analyze      | timestamp with time zone | 上次手动分析这个表的时间。                          |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析的时间。                |
| vacuum_count      | numeric                  | 这个表被手动清理的次数（不计算VACUUM FULL）。       |
| autovacuum_count  | numeric                  | 这个表被autovacuum清理的次数。                      |
| analyze_count     | numeric                  | 这个表被手动分析的次数。                            |
| autoanalyze_count | numeric                  | 这个表被autovacuum守护进程分析的次数。              |



##### GLOBAL_STAT_USER_TABLES

得到各节点所有命名空间中用户自定义普通表的状态信息。

| **名称**          | **类型**                 | **描述**                                            |
| :---------------- | :----------------------- | :-------------------------------------------------- |
| node_name         | name                     | 数据库进程名称。                                    |
| relid             | oid                      | 表的OID。                                           |
| schemaname        | name                     | 此表的模式名。                                      |
| relname           | name                     | 表名。                                              |
| seq_scan          | bigint                   | 此表发起的顺序扫描数。                              |
| seq_tup_read      | bigint                   | 顺序扫描抓取的活跃行数。                            |
| idx_scan          | bigint                   | 此表发起的索引扫描数。                              |
| idx_tup_fetch     | bigint                   | 索引扫描抓取的活跃行数。                            |
| n_tup_ins         | bigint                   | 插入行数。                                          |
| n_tup_upd         | bigint                   | 更新行数。                                          |
| n_tup_del         | bigint                   | 删除行数。                                          |
| n_tup_hot_upd     | bigint                   | HOT更新行数（即没有更新所需的单独索引）。           |
| n_live_tup        | bigint                   | 估计活跃行数。                                      |
| n_dead_tup        | bigint                   | 估计死行数。                                        |
| last_vacuum       | timestamp with time zone | 最后一次此表是手动清理的（不计算VACUUM FULL）时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                |
| last_analyze      | timestamp with time zone | 上次手动分析这个表的时间。                          |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析的时间。                |
| vacuum_count      | bigint                   | 这个表被手动清理的次数（不计算VACUUM FULL）。       |
| autovacuum_count  | bigint                   | 这个表被autovacuum清理的次数。                      |
| analyze_count     | bigint                   | 这个表被手动分析的次数。                            |
| autoanalyze_count | bigint                   | 这个表被autovacuum守护进程分析的次数。              |



##### STAT_USER_INDEXES

显示数据库中用户自定义普通表的索引状态信息。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| relid         | oid      | 此索引的表的OID。                          |
| indexrelid    | oid      | 索引的OID。                                |
| schemaname    | name     | 索引的模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | bigint   | 索引上开始的索引扫描数。                   |
| idx_tup_read  | bigint   | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | bigint   | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### SUMMARY_STAT_USER_INDEXES

openGauss内汇聚所有数据库中用户自定义普通表的索引状态信息。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | numeric  | 索引上开始的索引扫描数。                   |
| idx_tup_read  | numeric  | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | numeric  | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### GLOBAL_STAT_USER_INDEXES

得到各节点数据库中用户自定义普通表的索引状态信息。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| node_name     | name     | 数据库进程名称。                           |
| relid         | oid      | 这个索引的表的OID。                        |
| indexrelid    | oid      | 索引的OID。                                |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | bigint   | 索引上开始的索引扫描数。                   |
| idx_tup_read  | bigint   | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | bigint   | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### STAT_SYS_TABLES

显示单节点内pg_catalog、information_schema以及pg_toast模式下的所有系统表的统计信息。

| **名称**          | **类型**                 | **描述**                                            |
| :---------------- | :----------------------- | :-------------------------------------------------- |
| relid             | oid                      | 表的OID。                                           |
| schemaname        | name                     | 该表的模式名。                                      |
| relname           | name                     | 表名。                                              |
| seq_scan          | bigint                   | 该表发起的顺序扫描数。                              |
| seq_tup_read      | bigint                   | 顺序扫描抓取的活跃行数。                            |
| idx_scan          | bigint                   | 该表发起的索引扫描数。                              |
| idx_tup_fetch     | bigint                   | 索引扫描抓取的活跃行数。                            |
| n_tup_ins         | bigint                   | 插入行数。                                          |
| n_tup_upd         | bigint                   | 更新行数。                                          |
| n_tup_del         | bigint                   | 删除行数。                                          |
| n_tup_hot_upd     | bigint                   | HOT更新行数（比如没有更新所需的单独索引）。         |
| n_live_tup        | bigint                   | 估计活跃行数。                                      |
| n_dead_tup        | bigint                   | 估计死行数。                                        |
| last_vacuum       | timestamp with time zone | 最后一次该表是手动清理的（不计算VACUUM FULL）时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                |
| last_analyze      | timestamp with time zone | 上次手动分析该表的时间。                            |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析的时间。                |
| vacuum_count      | bigint                   | 这个表被手动清理的次数（不计算VACUUM FULL）。       |
| autovacuum_count  | bigint                   | 该表被autovacuum清理的次数。                        |
| analyze_count     | bigint                   | 该表被手动分析的次数。                              |
| autoanalyze_count | bigint                   | 该表被autovacuum守护进程分析的次数。                |



##### SUMMARY_STAT_SYS_TABLES

openGauss内汇聚pg_catalog、information_schema以及pg_toast模式下的所有系统表的统计信息。

| **名称**          | **类型**                 | **描述**                                            |
| :---------------- | :----------------------- | :-------------------------------------------------- |
| schemaname        | name                     | 此表的模式名。                                      |
| relname           | name                     | 表名。                                              |
| seq_scan          | numeric                  | 此表发起的顺序扫描数。                              |
| seq_tup_read      | numeric                  | 顺序扫描抓取的活跃行数。                            |
| idx_scan          | numeric                  | 此表发起的索引扫描数。                              |
| idx_tup_fetch     | numeric                  | 索引扫描抓取的活跃行数。                            |
| n_tup_ins         | numeric                  | 插入行数。                                          |
| n_tup_upd         | numeric                  | 更新行数。                                          |
| n_tup_del         | numeric                  | 删除行数。                                          |
| n_tup_hot_upd     | numeric                  | HOT更新行数（比如没有更新所需的单独索引）。         |
| n_live_tup        | numeric                  | 估计活跃行数。                                      |
| n_dead_tup        | numeric                  | 估计死行数。                                        |
| last_vacuum       | timestamp with time zone | 最后一次此表是手动清理的（不计算VACUUM FULL）时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                |
| last_analyze      | timestamp with time zone | 上次手动分析这个表的时间。                          |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析的时间。                |
| vacuum_count      | numeric                  | 这个表被手动清理的次数（不计算VACUUM FULL）。       |
| autovacuum_count  | numeric                  | 这个表被autovacuum清理的次数。                      |
| analyze_count     | numeric                  | 这个表被手动分析的次数。                            |
| autoanalyze_count | numeric                  | 这个表被autovacuum守护进程分析的次数。              |



##### GLOBAL_STAT_SYS_TABLES

得到各节点pg_catalog、information_schema以及pg_toast模式下的所有系统表的统计信息。

| **名称**          | **类型**                 | **描述**                                            |
| :---------------- | :----------------------- | :-------------------------------------------------- |
| node_name         | name                     | 节点名称。                                          |
| relid             | oid                      | 表的OID。                                           |
| schemaname        | name                     | 此表的模式名。                                      |
| relname           | name                     | 表名。                                              |
| seq_scan          | bigint                   | 此表发起的顺序扫描数。                              |
| seq_tup_read      | bigint                   | 顺序扫描抓取的活跃行数。                            |
| idx_scan          | bigint                   | 此表发起的索引扫描数。                              |
| idx_tup_fetch     | bigint                   | 索引扫描抓取的活跃行数。                            |
| n_tup_ins         | bigint                   | 插入行数。                                          |
| n_tup_upd         | bigint                   | 更新行数。                                          |
| n_tup_del         | bigint                   | 删除行数。                                          |
| n_tup_hot_upd     | bigint                   | HOT更新行数（比如没有更新所需的单独索引）。         |
| n_live_tup        | bigint                   | 估计活跃行数。                                      |
| n_dead_tup        | bigint                   | 估计死行数。                                        |
| last_vacuum       | timestamp with time zone | 最后一次此表是手动清理的（不计算VACUUM FULL）时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                |
| last_analyze      | timestamp with time zone | 上次手动分析这个表的时间。                          |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析的时间。                |
| vacuum_count      | bigint                   | 这个表被手动清理的次数（不计算VACUUM FULL）。       |
| autovacuum_count  | bigint                   | 这个表被autovacuum清理的次数。                      |
| analyze_count     | bigint                   | 这个表被手动分析的次数。                            |
| autoanalyze_count | bigint                   | 这个表被autovacuum守护进程分析的次数。              |



##### STAT_SYS_INDEXES

显示pg_catalog、information_schema以及pg_toast模式中所有系统表的索引状态信息。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| relid         | oid      | 此索引的表的OID。                          |
| indexrelid    | oid      | 索引的OID。                                |
| schemaname    | name     | 索引的模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | bigint   | 索引上开始的索引扫描数。                   |
| idx_tup_read  | bigint   | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | bigint   | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### SUMMARY_STAT_SYS_INDEXES

openGauss内汇聚pg_catalog、information_schema以及pg_toast模式中所有系统表的索引状态信息。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | numeric  | 索引上开始的索引扫描数。                   |
| idx_tup_read  | numeric  | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | numeric  | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### GLOBAL_STAT_SYS_INDEXES

得到各节点pg_catalog、information_schema以及pg_toast模式中所有系统表的索引状态信息。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| node_name     | name     | 数据库进程名称。                           |
| relid         | oid      | 这个索引的表的OID。                        |
| indexrelid    | oid      | 索引的OID。                                |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | bigint   | 索引上开始的索引扫描数。                   |
| idx_tup_read  | bigint   | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | bigint   | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### STAT_ALL_TABLES

本节点内数据库中每个表（包括TOAST表）的一行的统计信息。

| **名称**          | **类型**                 | **描述**                                              |
| :---------------- | :----------------------- | :---------------------------------------------------- |
| relid             | oid                      | 表的OID。                                             |
| schemaname        | name                     | 该表的模式名。                                        |
| relname           | name                     | 表名。                                                |
| seq_scan          | bigint                   | 该表发起的顺序扫描数。                                |
| seq_tup_read      | bigint                   | 顺序扫描抓取的活跃行数。                              |
| idx_scan          | bigint                   | 该表发起的索引扫描数。                                |
| idx_tup_fetch     | bigint                   | 索引扫描抓取的活跃行数。                              |
| n_tup_ins         | bigint                   | 插入行数。                                            |
| n_tup_upd         | bigint                   | 更新行数。                                            |
| n_tup_del         | bigint                   | 删除行数。                                            |
| n_tup_hot_upd     | bigint                   | HOT更新行数（比如没有更新所需的单独索引）。           |
| n_live_tup        | bigint                   | 估计活跃行数。                                        |
| n_dead_tup        | bigint                   | 估计死行数。                                          |
| last_vacuum       | timestamp with time zone | 最后一次该表是手动清理的（不计算VACUUM FULL）的时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                  |
| last_analyze      | timestamp with time zone | 上次手动分析该表的时间。                              |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析时间。                    |
| vacuum_count      | bigint                   | 该表被手动清理的次数（不计算VACUUM FULL）。           |
| autovacuum_count  | bigint                   | 该表被autovacuum清理的次数。                          |
| analyze_count     | bigint                   | 该表被手动分析的次数。                                |
| autoanalyze_count | bigint                   | 该表被autovacuum守护进程分析的次数。                  |



##### SUMMARY_STAT_ALL_TABLES

openGauss内汇聚数据库中每个表的一行（包括TOAST表）的统计信息。

| **名称**          | **类型**                 | **描述**                                              |
| :---------------- | :----------------------- | :---------------------------------------------------- |
| schemaname        | name                     | 此表的模式名。                                        |
| relname           | name                     | 表名。                                                |
| seq_scan          | numeric                  | 此表发起的顺序扫描数。                                |
| seq_tup_read      | numeric                  | 顺序扫描抓取的活跃行数。                              |
| idx_scan          | numeric                  | 此表发起的索引扫描数。                                |
| idx_tup_fetch     | numeric                  | 索引扫描抓取的活跃行数。                              |
| n_tup_ins         | numeric                  | 插入行数。                                            |
| n_tup_upd         | numeric                  | 更新行数。                                            |
| n_tup_del         | numeric                  | 删除行数。                                            |
| n_tup_hot_upd     | numeric                  | HOT更新行数（比如没有更新所需的单独索引）。           |
| n_live_tup        | numeric                  | 估计活跃行数。                                        |
| n_dead_tup        | numeric                  | 估计死行数。                                          |
| last_vacuum       | timestamp with time zone | 最后一次此表是手动清理的（不计算VACUUM FULL）的时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                  |
| last_analyze      | timestamp with time zone | 上次手动分析这个表的时间。                            |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析时间。                    |
| vacuum_count      | numeric                  | 这个表被手动清理的次数（不计算VACUUM FULL）。         |
| autovacuum_count  | numeric                  | 这个表被autovacuum清理的次数。                        |
| analyze_count     | numeric                  | 这个表被手动分析的次数。                              |
| autoanalyze_count | numeric                  | 这个表被autovacuum守护进程分析的次数。                |



##### GLOBAL_STAT_ALL_TABLES

得到各节点数据中每个表的一行（包括TOAST表）的统计信息。

| **名称**          | **类型**                 | **描述**                                              |
| :---------------- | :----------------------- | :---------------------------------------------------- |
| node_name         | name                     | 数据库进程名称。                                      |
| relid             | oid                      | 表的OID。                                             |
| schemaname        | name                     | 此表的模式名。                                        |
| relname           | name                     | 表名。                                                |
| seq_scan          | bigint                   | 此表发起的顺序扫描数。                                |
| seq_tup_read      | bigint                   | 顺序扫描抓取的活跃行数。                              |
| idx_scan          | bigint                   | 此表发起的索引扫描数。                                |
| idx_tup_fetch     | bigint                   | 索引扫描抓取的活跃行数。                              |
| n_tup_ins         | bigint                   | 插入行数。                                            |
| n_tup_upd         | bigint                   | 更新行数。                                            |
| n_tup_del         | bigint                   | 删除行数。                                            |
| n_tup_hot_upd     | bigint                   | HOT更新行数（比如没有更新所需的单独索引）。           |
| n_live_tup        | bigint                   | 估计活跃行数。                                        |
| n_dead_tup        | bigint                   | 估计死行数。                                          |
| last_vacuum       | timestamp with time zone | 最后一次此表是手动清理的（不计算VACUUM FULL）的时间。 |
| last_autovacuum   | timestamp with time zone | 上次被autovacuum守护进程清理的时间。                  |
| last_analyze      | timestamp with time zone | 上次手动分析这个表的时间。                            |
| last_autoanalyze  | timestamp with time zone | 上次被autovacuum守护进程分析时间。                    |
| vacuum_count      | bigint                   | 这个表被手动清理的次数（不计算VACUUM FULL）。         |
| autovacuum_count  | bigint                   | 这个表被autovacuum清理的次数。                        |
| analyze_count     | bigint                   | 这个表被手动分析的次数。                              |
| autoanalyze_count | bigint                   | 这个表被autovacuum守护进程分析的次数。                |



##### STAT_ALL_INDEXES

将包含本节点数据库中的每个索引行，显示访问特定索引的统计。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| relid         | oid      | 这个索引的表的OID。                        |
| indexrelid    | oid      | 索引的OID。                                |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | bigint   | 索引上开始的索引扫描数。                   |
| idx_tup_read  | bigint   | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | bigint   | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### SUMMARY_STAT_ALL_INDEXES

将包含openGauss内汇聚数据库中的每个索引行，显示访问特定索引的统计。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | numeric  | 索引上开始的索引扫描数。                   |
| idx_tup_read  | numeric  | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | numeric  | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### GLOBAL_STAT_ALL_INDEXES

将包含各节点数据库中的每个索引行，显示访问特定索引的统计。

| **名称**      | **类型** | **描述**                                   |
| :------------ | :------- | :----------------------------------------- |
| node_name     | name     | 数据库进程名称。                           |
| relid         | oid      | 这个索引的表的OID。                        |
| indexrelid    | oid      | 索引的OID。                                |
| schemaname    | name     | 索引中模式名。                             |
| relname       | name     | 索引的表名。                               |
| indexrelname  | name     | 索引名。                                   |
| idx_scan      | bigint   | 索引上开始的索引扫描数。                   |
| idx_tup_read  | bigint   | 通过索引上扫描返回的索引项数。             |
| idx_tup_fetch | bigint   | 通过使用索引的简单索引扫描抓取的活表行数。 |



##### STAT_DATABASE

视图将包含本节点中每个数据库的统计信息。

| **名称**       | **类型**                 | **描述**                                                     |
| :------------- | :----------------------- | :----------------------------------------------------------- |
| datid          | oid                      | 数据库的OID。                                                |
| datname        | name                     | 此数据库的名称。                                             |
| numbackends    | integer                  | 当前连接到该数据库的后端数。这是在返回一个反映目前状态值的视图中唯一的列；自上次重置所有其他列返回累积值。 |
| xact_commit    | bigint                   | 此数据库中已经提交的事务数。                                 |
| xact_rollback  | bigint                   | 此数据库中已经回滚的事务数。                                 |
| blks_read      | bigint                   | 在这个数据库中读取的磁盘块的数量。                           |
| blks_hit       | bigint                   | 高速缓存中已经发现的磁盘块的次数，这样读取是不必要的（这只包括PostgreSQL缓冲区高速缓存，没有操作系统的文件系统缓存）。 |
| tup_returned   | bigint                   | 通过数据库查询返回的行数。                                   |
| tup_fetched    | bigint                   | 通过数据库查询抓取的行数。                                   |
| tup_inserted   | bigint                   | 通过数据库查询插入的行数。                                   |
| tup_updated    | bigint                   | 通过数据库查询更新的行数。                                   |
| tup_deleted    | bigint                   | 通过数据库查询删除的行数。                                   |
| conflicts      | bigint                   | 由于数据库恢复冲突取消的查询数量（只在备用服务器发生的冲突）。请参见[STAT_DATABASE_CONFLICTS](https://docs.opengauss.org/zh/docs/3.0.0/docs/Developerguide/STAT_DATABASE_CONFLICTS.html)获取更多信息。 |
| temp_files     | bigint                   | 通过数据库查询创建的临时文件数量。计算所有临时文件，不论为什么创建临时文件（比如排序或者哈希），而且不管log_temp_files设置。 |
| temp_bytes     | bigint                   | 通过数据库查询写入临时文件的数据总量。计算所有临时文件，不论为什么创建临时文件，而且不管log_temp_files设置。 |
| deadlocks      | bigint                   | 在该数据库中检索的死锁数。                                   |
| blk_read_time  | double precision         | 通过数据库后端读取数据文件块花费的时间，以毫秒计算。         |
| blk_write_time | double precision         | 通过数据库后端写入数据文件块花费的时间，以毫秒计算。         |
| stats_reset    | timestamp with time zone | 重置当前状态统计的时间。                                     |



##### SUMMARY_STAT_DATABASE

视图将包含数据库内汇聚的每个数据库的每一行，显示数据库统计。

| **名称**       | **类型**                 | **描述**                                                     |
| :------------- | :----------------------- | :----------------------------------------------------------- |
| datname        | name                     | 这个数据库的名称。                                           |
| numbackends    | bigint                   | 当前连接到该数据库的后端数。这是在返回一个反映目前状态值的视图中唯一的列；自上次重置所有其他列返回累积值。 |
| xact_commit    | numeric                  | 此数据库中已经提交的事务数。                                 |
| xact_rollback  | numeric                  | 此数据库中已经回滚的事务数。                                 |
| blks_read      | numeric                  | 在这个数据库中读取的磁盘块的数量。                           |
| blks_hit       | numeric                  | 高速缓存中已经发现的磁盘块的次数，这样读取是不必要的（这只包括openGauss缓冲区高速缓存，没有操作系统的文件系统缓存）。 |
| tup_returned   | numeric                  | 通过数据库查询返回的行数。                                   |
| tup_fetched    | numeric                  | 通过数据库查询抓取的行数。                                   |
| tup_inserted   | bigint                   | 通过数据库查询插入的行数。                                   |
| tup_updated    | bigint                   | 通过数据库查询更新的行数。                                   |
| tup_deleted    | bigint                   | 通过数据库查询删除的行数。                                   |
| conflicts      | bigint                   | 由于数据库恢复冲突取消的查询数量（只在备用服务器发生的冲突）。请参见[STAT_DATABASE_CONFLICTS](https://docs.opengauss.org/zh/docs/3.0.0/docs/Developerguide/STAT_DATABASE_CONFLICTS.html)获取更多信息。 |
| temp_files     | numeric                  | 通过数据库查询创建的临时文件数量。计算所有临时文件，不论为什么创建临时文件（比如排序或者哈希），而且不管log_temp_files设置。 |
| temp_bytes     | numeric                  | 通过数据库查询写入临时文件的数据总量。计算所有临时文件，不论为什么创建临时文件，而且不管log_temp_files设置。 |
| deadlocks      | bigint                   | 在该数据库中检索的死锁数。                                   |
| blk_read_time  | double precision         | 通过数据库后端读取数据文件块花费的时间，以毫秒计算。         |
| blk_write_time | double precision         | 通过数据库后端写入数据文件块花费的时间，以毫秒计算。         |
| stats_reset    | timestamp with time zone | 重置当前状态统计的时间。                                     |



##### GLOBAL_STAT_DATABASE

视图将包含openGauss中各节点的每个数据库的每一行，显示数据库统计。

| **名称**       | **类型**                 | **描述**                                                     |
| :------------- | :----------------------- | :----------------------------------------------------------- |
| node_name      | name                     | 数据库进程名称。                                             |
| datid          | oid                      | 数据库的OID。                                                |
| datname        | name                     | 这个数据库的名称。                                           |
| numbackends    | integer                  | 当前连接到该数据库的后端数。这是在返回一个反映目前状态值的视图中唯一的列；自上次重置所有其他列返回累积值。 |
| xact_commit    | bigint                   | 此数据库中已经提交的事务数。                                 |
| xact_rollback  | bigint                   | 此数据库中已经回滚的事务数。                                 |
| blks_read      | bigint                   | 在这个数据库中读取的磁盘块的数量。                           |
| blks_hit       | bigint                   | 高速缓存中已经发现的磁盘块的次数，这样读取是不必要的（这只包括数据库内核缓冲区高速缓存，没有操作系统的文件系统缓存）。 |
| tup_returned   | bigint                   | 通过数据库查询返回的行数。                                   |
| tup_fetched    | bigint                   | 通过数据库查询抓取的行数。                                   |
| tup_inserted   | bigint                   | 通过数据库查询插入的行数。                                   |
| tup_updated    | bigint                   | 通过数据库查询更新的行数。                                   |
| tup_deleted    | bigint                   | 通过数据库查询删除的行数。                                   |
| conflicts      | bigint                   | 由于数据库恢复冲突取消的查询数量（只在备用服务器发生的冲突）。请参见[STAT_DATABASE_CONFLICTS](https://docs.opengauss.org/zh/docs/3.0.0/docs/Developerguide/STAT_DATABASE_CONFLICTS.html)获取更多信息。 |
| temp_files     | bigint                   | 通过数据库查询创建的临时文件数量。计算所有临时文件，不论为什么创建临时文件（比如排序或者哈希），而且不管log_temp_files设置。 |
| temp_bytes     | bigint                   | 通过数据库查询写入临时文件的数据总量。计算所有临时文件，不论为什么创建临时文件，而且不管log_temp_files设置。 |
| deadlocks      | bigint                   | 在该数据库中检索的死锁数。                                   |
| blk_read_time  | double precision         | 通过数据库后端读取数据文件块花费的时间，以毫秒计算。         |
| blk_write_time | double precision         | 通过数据库后端写入数据文件块花费的时间，以毫秒计算。         |
| stats_reset    | timestamp with time zone | 重置当前状态统计的时间。                                     |



##### STAT_DATABASE_CONFLICTS

显示当前节点数据库冲突状态的统计信息。

| **名称**         | **类型** | **描述**             |
| :--------------- | :------- | :------------------- |
| datid            | oid      | 数据库标识。         |
| datname          | name     | 数据库名称。         |
| confl_tablespace | bigint   | 冲突的表空间的数目。 |
| confl_lock       | bigint   | 冲突的锁数目。       |
| confl_snapshot   | bigint   | 冲突的快照数目。     |
| confl_bufferpin  | bigint   | 冲突的缓冲区数目。   |
| confl_deadlock   | bigint   | 冲突的死锁数目。     |



##### SUMMARY_STAT_DATABASE_CONFLICTS

显示openGauss内汇聚的数据库冲突状态的统计信息。

| **名称**         | **类型** | **描述**             |
| :--------------- | :------- | :------------------- |
| datname          | name     | 数据库名称。         |
| confl_tablespace | bigint   | 冲突的表空间的数目。 |
| confl_lock       | bigint   | 冲突的锁数目。       |
| confl_snapshot   | bigint   | 冲突的快照数目。     |
| confl_bufferpin  | bigint   | 冲突的缓冲区数目。   |
| confl_deadlock   | bigint   | 冲突的死锁数目。     |



##### GLOBAL_STAT_DATABASE_CONFLICTS

显示每个节点的数据库冲突状态的统计信息。

| 名称             | 类型   | 描述                 |
| :--------------- | :----- | :------------------- |
| node_name        | name   | 数据库进程名称。     |
| datid            | oid    | 数据库标识。         |
| datname          | name   | 数据库名称。         |
| confl_tablespace | bigint | 冲突的表空间的数目。 |
| confl_lock       | bigint | 冲突的锁数目。       |
| confl_snapshot   | bigint | 冲突的快照数目。     |
| confl_bufferpin  | bigint | 冲突的缓冲区数目。   |
| confl_deadlock   | bigint | 冲突的死锁数目。     |



##### STAT_XACT_ALL_TABLES

显示命名空间中所有普通表和toast表的事务状态信息。

| 名称          | 类型   | 描述                                        |
| :------------ | :----- | :------------------------------------------ |
| relid         | oid    | 表的OID。                                   |
| schemaname    | name   | 该表的模式名。                              |
| relname       | name   | 表名。                                      |
| seq_scan      | bigint | 该表发起的顺序扫描数。                      |
| seq_tup_read  | bigint | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | bigint | 该表发起的索引扫描数。                      |
| idx_tup_fetch | bigint | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | bigint | 插入行数。                                  |
| n_tup_upd     | bigint | 更新行数。                                  |
| n_tup_del     | bigint | 删除行数。                                  |
| n_tup_hot_upd | bigint | HOT更新行数（比如没有更新所需的单独索引）。 |



##### SUMMARY_STAT_XACT_ALL_TABLES

显示openGauss内汇聚的命名空间中所有普通表和toast表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| schemaname    | name     | 此表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | numeric  | 此表发起的顺序扫描数。                      |
| seq_tup_read  | numeric  | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | numeric  | 此表发起的索引扫描数。                      |
| idx_tup_fetch | numeric  | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | numeric  | 插入行数。                                  |
| n_tup_upd     | numeric  | 更新行数。                                  |
| n_tup_del     | numeric  | 删除行数。                                  |
| n_tup_hot_upd | numeric  | HOT更新行数（比如没有更新所需的单独索引）。 |



##### GLOBAL_STAT_XACT_ALL_TABLES

显示各节点的命名空间中所有普通表和toast表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| node_name     | name     | 数据库进程名称。                            |
| relid         | oid      | 表的OID。                                   |
| schemaname    | name     | 此表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | bigint   | 此表发起的顺序扫描数。                      |
| seq_tup_read  | bigint   | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | bigint   | 此表发起的索引扫描数。                      |
| idx_tup_fetch | bigint   | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | bigint   | 插入行数。                                  |
| n_tup_upd     | bigint   | 更新行数。                                  |
| n_tup_del     | bigint   | 删除行数。                                  |
| n_tup_hot_upd | bigint   | HOT更新行数（比如没有更新所需的单独索引）。 |



##### STAT_XACT_SYS_TABLES

显示当前节点命名空间中系统表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| relid         | oid      | 表的OID。                                   |
| schemaname    | name     | 该表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | bigint   | 该表发起的顺序扫描数。                      |
| seq_tup_read  | bigint   | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | bigint   | 该表发起的索引扫描数。                      |
| idx_tup_fetch | bigint   | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | bigint   | 插入行数。                                  |
| n_tup_upd     | bigint   | 更新行数。                                  |
| n_tup_del     | bigint   | 删除行数。                                  |
| n_tup_hot_upd | bigint   | HOT更新行数（比如没有更新所需的单独索引）。 |



##### SUMMARY_STAT_XACT_SYS_TABLES

显示openGauss内汇聚的命名空间中系统表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| schemaname    | name     | 此表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | numeric  | 此表发起的顺序扫描数。                      |
| seq_tup_read  | numeric  | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | numeric  | 此表发起的索引扫描数。                      |
| idx_tup_fetch | numeric  | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | numeric  | 插入行数。                                  |
| n_tup_upd     | numeric  | 更新行数。                                  |
| n_tup_del     | numeric  | 删除行数。                                  |
| n_tup_hot_upd | numeric  | HOT更新行数（比如没有更新所需的单独索引）。 |



##### GLOBAL_STAT_XACT_SYS_TABLES

显示各节点命名空间中系统表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| node_name     | name     | 节点名称。                                  |
| relid         | oid      | 表的OID。                                   |
| schemaname    | name     | 此表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | bigint   | 此表发起的顺序扫描数。                      |
| seq_tup_read  | bigint   | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | bigint   | 此表发起的索引扫描数。                      |
| idx_tup_fetch | bigint   | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | bigint   | 插入行数。                                  |
| n_tup_upd     | bigint   | 更新行数。                                  |
| n_tup_del     | bigint   | 删除行数。                                  |
| n_tup_hot_upd | bigint   | HOT更新行数（比如没有更新所需的单独索引）。 |



##### STAT_XACT_USER_TABLES

显示当前节点命名空间中用户表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| relid         | oid      | 表的OID。                                   |
| schemaname    | name     | 该表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | bigint   | 该表发起的顺序扫描数。                      |
| seq_tup_read  | bigint   | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | bigint   | 该表发起的索引扫描数。                      |
| idx_tup_fetch | bigint   | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | bigint   | 插入行数。                                  |
| n_tup_upd     | bigint   | 更新行数。                                  |
| n_tup_del     | bigint   | 删除行数。                                  |
| n_tup_hot_upd | bigint   | HOT更新行数（比如没有更新所需的单独索引）。 |



##### SUMMARY_STAT_XACT_USER_TABLES

显示数据库内汇聚的命名空间中用户表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| schemaname    | name     | 此表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | numeric  | 此表发起的顺序扫描数。                      |
| seq_tup_read  | numeric  | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | numeric  | 此表发起的索引扫描数。                      |
| idx_tup_fetch | numeric  | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | numeric  | 插入行数。                                  |
| n_tup_upd     | numeric  | 更新行数。                                  |
| n_tup_del     | numeric  | 删除行数。                                  |
| n_tup_hot_upd | numeric  | HOT更新行数（比如没有更新所需的单独索引）。 |



##### GLOBAL_STAT_XACT_USER_TABLES

显示各节点命名空间中用户表的事务状态信息。

| **名称**      | **类型** | **描述**                                    |
| :------------ | :------- | :------------------------------------------ |
| node_name     | name     | 数据库进程名称。                            |
| relid         | oid      | 表的OID。                                   |
| schemaname    | name     | 此表的模式名。                              |
| relname       | name     | 表名。                                      |
| seq_scan      | bigint   | 此表发起的顺序扫描数。                      |
| seq_tup_read  | bigint   | 顺序扫描抓取的活跃行数。                    |
| idx_scan      | bigint   | 此表发起的索引扫描数。                      |
| idx_tup_fetch | bigint   | 索引扫描抓取的活跃行数。                    |
| n_tup_ins     | bigint   | 插入行数。                                  |
| n_tup_upd     | bigint   | 更新行数。                                  |
| n_tup_del     | bigint   | 删除行数。                                  |
| n_tup_hot_upd | bigint   | HOT更新行数（比如没有更新所需的单独索引）。 |



##### STAT_XACT_USER_FUNCTIONS

视图包含当前节点本事务内函数执行的统计信息。

| **名称**   | **类型**         | **描述**                     |
| :--------- | :--------------- | :--------------------------- |
| funcid     | oid              | 函数标识。                   |
| schemaname | name             | 模式的名称。                 |
| funcname   | name             | 函数名称。                   |
| calls      | bigint           | 函数被调用的次数。           |
| total_time | double precision | 函数的总执行时长。           |
| self_time  | double precision | 当前线程调用函数的总的时长。 |



##### SUMMARY_STAT_XACT_USER_FUNCTIONS

视图包含openGauss内汇聚的本事务内函数执行的统计信息。

| **称**     | **类型**         | **描述**                     |
| :--------- | :--------------- | :--------------------------- |
| schemaname | name             | 模式的名称。                 |
| funcname   | name             | 函数名称。                   |
| calls      | numeric          | 函数被调用的次数。           |
| total_time | double precision | 函数的总执行时长。           |
| self_time  | double precision | 当前线程调用函数的总的时长。 |



##### GLOBAL_STAT_XACT_USER_FUNCTIONS

视图包含各节点本事务内函数执行的统计信息。

| **名称**   | **类型**         | **描述**                                               |
| :--------- | :--------------- | :----------------------------------------------------- |
| node_name  | name             | 节点名称。                                             |
| funcid     | oid              | 函数标识。                                             |
| schemaname | name             | 模式的名称。                                           |
| funcname   | name             | 函数名称。                                             |
| calls      | bigint           | 函数被调用的次数。                                     |
| total_time | double precision | 此函数及其调用的所有其他函数所花费的总时间。           |
| self_time  | double precision | 在此函数本身中花费的总时间（不包括它调用的其他函数）。 |



##### STAT_BAD_BLOCK

获得当前节点表、索引等文件的读取失败信息。

| **名称**     | **类型**                 | **描述**               |
| :----------- | :----------------------- | :--------------------- |
| nodename     | text                     | 数据库进程名称。       |
| databaseid   | integer                  | database的oid。        |
| tablespaceid | integer                  | tablespace的oid。      |
| relfilenode  | integer                  | relation的file node。  |
| bucketid     | smallint                 | 一致性hash bucket ID。 |
| forknum      | integer                  | fork编号。             |
| error_count  | integer                  | error的数量。          |
| first_time   | timestamp with time zone | 坏块第一次出现的时间。 |
| last_time    | timestamp with time zone | 坏块最后出现的时间。   |



##### SUMMARY_STAT_BAD_BLOCK

获得openGauss内汇聚的表、索引等文件的读取失败信息。

| **名称**     | **类型**                 | **描述**               |
| :----------- | :----------------------- | :--------------------- |
| databaseid   | integer                  | database的oid。        |
| tablespaceid | integer                  | tablespace的oid。      |
| relfilenode  | integer                  | relation的file node。  |
| forknum      | bigint                   | fork编号。             |
| error_count  | bigint                   | error的数量。          |
| first_time   | timestamp with time zone | 坏块第一次出现的时间。 |
| last_time    | timestamp with time zone | 坏块最后出现的时间。   |



##### GLOBAL_STAT_BAD_BLOCK

获得各节点的表、索引等文件的读取失败信息。

| **名称**     | **类型**                 | **描述**               |
| :----------- | :----------------------- | :--------------------- |
| node_name    | text                     | 数据库进程名称。       |
| databaseid   | integer                  | database的oid。        |
| tablespaceid | integer                  | tablespace的oid。      |
| relfilenode  | integer                  | relation的file node。  |
| forknum      | integer                  | fork编号。             |
| error_count  | integer                  | error的数量。          |
| first_time   | timestamp with time zone | 坏块第一次出现的时间。 |
| last_time    | timestamp with time zone | 坏块最后出现的时间。   |



##### STAT_USER_FUNCTIONS

STAT_USER_FUNCTIONS视图显示命名空间中用户自定义函数（函数语言为非内部语言）的状态信息。

| 名称       | 类型             | 描述                                                         |
| :--------- | :--------------- | :----------------------------------------------------------- |
| funcid     | oid              | 函数标识。                                                   |
| schemaname | name             | schema的名称。                                               |
| funcname   | name             | 用户自定义函数的名称。                                       |
| calls      | bigint           | 函数被调用的次数。                                           |
| total_time | double precision | 调用此函数花费的总时间，包含调用其它函数的时间（单位：毫秒）。 |
| self_time  | double precision | 调用此函数自己花费的时间，不包含调用其它函数的时间（单位：毫秒）。 |



##### SUMMARY_STAT_USER_FUNCTIONS]

SUMMARY_STAT_USER_FUNCTIONS用来统计所数据库节点用户自定义函数的相关统计信息。

| **名称**   | **类型**         | **描述**                                                     |
| :--------- | :--------------- | :----------------------------------------------------------- |
| schemaname | name             | schema的名称。                                               |
| funcname   | name             | 用户function的名称。                                         |
| calls      | numeric          | 总调用次数。                                                 |
| total_time | double precision | 调用此function的总时间花费，包含调用其它function的时间（单位：毫秒）。 |
| self_time  | double precision | 调用此function自己时间的花费，不包含调用其它function的时间（单位：毫秒）。 |



##### GLOBAL_STAT_USER_FUNCTIONS

提供openGauss中各个节点的用户所创建的函数的状态的统计信息。

| **名称**   | **类型**         | **描述**                                                     |
| :--------- | :--------------- | :----------------------------------------------------------- |
| node_name  | name             | 数据库进程名称。                                             |
| funcid     | oid              | 函数的id。                                                   |
| schemaname | name             | 此函数所在模式的名称。                                       |
| funcname   | name             | 函数名称。                                                   |
| calls      | bigint           | 该函数被调用的次数。                                         |
| total_time | double precision | 此函数及其调用的所有其他函数所花费的总时间（以毫秒为单位）。 |
| self_time  | double precision | 在此函数本身中花费的总时间（不包括它调用的其他函数），以毫秒为单位。 |



#### 6. Workload

##### WORKLOAD_SQL_COUNT

显示当前节点workload上的SQL数量分布。普通用户只可以看到自己在workload上的SQL分布；初始用户可以看到总的workload的负载情况。

| **名称**     | **类型** | **描述**     |
| :----------- | :------- | :----------- |
| workload     | name     | 负载名称。   |
| select_count | bigint   | select数量。 |
| update_count | bigint   | update数量。 |
| insert_count | bigint   | insert数量。 |
| delete_count | bigint   | delete数量。 |
| ddl_count    | bigint   | ddl数量。    |
| dml_count    | bigint   | dml数量。    |
| dcl_count    | bigint   | dcl数量。    |



##### SUMMARY_WORKLOAD_SQL_COUNT

显示openGauss内各数据库主节点的workload上的SQL数量分布。

| **名称**     | **类型** | **描述**         |
| :----------- | :------- | :--------------- |
| node_name    | name     | 数据库进程名称。 |
| workload     | name     | 负载名称。       |
| select_count | bigint   | select数量。     |
| update_count | bigint   | update数量。     |
| insert_count | bigint   | insert数量。     |
| delete_count | bigint   | delete数量。     |
| ddl_count    | bigint   | ddl数量。        |
| dml_count    | bigint   | dml数量。        |
| dcl_count    | bigint   | dcl数量。        |



##### WORKLOAD_TRANSACTION

当前节点上负载的事务信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| workload            | name     | 负载的名称。                         |
| commit_counter      | bigint   | 用户事务commit数量。                 |
| rollback_counter    | bigint   | 用户事务rollback数量。               |
| resp_min            | bigint   | 用户事务最小响应时间（单位：微秒）。 |
| resp_max            | bigint   | 用户事务最大响应时间（单位：微秒）。 |
| resp_avg            | bigint   | 用户事务平均响应时间（单位：微秒）。 |
| resp_total          | bigint   | 用户事务总响应时间（单位：微秒）。   |
| bg_commit_counter   | bigint   | 后台事务commit数量。                 |
| bg_rollback_counter | bigint   | 后台事务rollback数量。               |
| bg_resp_min         | bigint   | 后台事务最小响应时间（单位：微秒）。 |
| bg_resp_max         | bigint   | 后台事务最大响应时间（单位：微秒）。 |
| bg_resp_avg         | bigint   | 后台事务平均响应时间（单位：微秒）。 |
| bg_resp_total       | bigint   | 后台事务总响应时间（单位：微秒）。   |



##### SUMMARY_WORKLOAD_TRANSACTION

显示openGauss内汇聚的负载事务信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| workload            | name     | 负载的名称。                         |
| commit_counter      | numeric  | 用户事务commit数量。                 |
| rollback_counter    | numeric  | 用户事务rollback数量。               |
| resp_min            | bigint   | 用户事务最小响应时间（单位：微秒）。 |
| resp_max            | bigint   | 用户事务最大响应时间（单位：微秒）。 |
| resp_avg            | bigint   | 用户事务平均响应时间（单位：微秒）。 |
| resp_total          | numeric  | 用户事务总响应时间（单位：微秒）。   |
| bg_commit_counter   | numeric  | 后台事务commit数量。                 |
| bg_rollback_counter | numeric  | 后台事务rollback数量。               |
| bg_resp_min         | bigint   | 后台事务最小响应时间（单位：微秒）。 |
| bg_resp_max         | bigint   | 后台事务最大响应时间（单位：微秒）。 |
| bg_resp_avg         | bigint   | 后台事务平均响应时间（单位：微秒）。 |
| bg_resp_total       | numeric  | 后台事务总响应时间（单位：微秒）。   |



##### GLOBAL_WORKLOAD_TRANSACTION

显示各节点上的workload的负载信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| node_name           | name     | 数据库进程名称。                     |
| workload            | name     | 负载的名称。                         |
| commit_counter      | bigint   | 用户事务commit数量。                 |
| rollback_counter    | bigint   | 用户事务rollback数量。               |
| resp_min            | bigint   | 用户事务最小响应时间（单位：微秒）。 |
| resp_max            | bigint   | 用户事务最大响应时间（单位：微秒）。 |
| resp_avg            | bigint   | 用户事务平均响应时间（单位：微秒）。 |
| resp_total          | bigint   | 用户事务总响应时间（单位：微秒）。   |
| bg_commit_counter   | bigint   | 后台事务commit数量。                 |
| bg_rollback_counter | bigint   | 后台事务rollback数量。               |
| bg_resp_min         | bigint   | 后台事务最小响应时间（单位：微秒）。 |
| bg_resp_max         | bigint   | 后台事务最大响应时间（单位：微秒）。 |
| bg_resp_avg         | bigint   | 后台事务平均响应时间（单位：微秒）。 |
| bg_resp_total       | bigint   | 后台事务总响应时间（单位：微秒）。   |



##### WORKLOAD_SQL_ELAPSE_TIME

WORKLOAD_SQL_ELAPSE_TIME用来统计workload（业务负载）上的SUID信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| workload            | name     | workload（业务负载）名称。           |
| total_select_elapse | bigint   | 总select的时间花费（单位：微秒）。   |
| max_select_elapse   | bigint   | 最大select的时间花费（单位：微秒）。 |
| min_select_elapse   | bigint   | 最小select的时间花费（单位：微秒）。 |
| avg_select_elapse   | bigint   | 平均select的时间花费（单位：微秒）。 |
| total_update_elapse | bigint   | 总update的时间花费（单位：微秒）。   |
| max_update_elapse   | bigint   | 最大update的时间花费（单位：微秒）。 |
| min_update_elapse   | bigint   | 最小update的时间花费（单位：微秒）。 |
| avg_update_elapse   | bigint   | 平均update的时间花费（单位：微秒）。 |
| total_insert_elapse | bigint   | 总insert的时间花费（单位：微秒）。   |
| max_insert_elapse   | bigint   | 最大insert的时间花费（单位：微秒）。 |
| min_insert_elapse   | bigint   | 最小insert的时间花费（单位：微秒）。 |
| avg_insert_elapse   | bigint   | 平均insert的时间花费（单位：微秒）。 |
| total_delete_elapse | bigint   | 总delete的时间花费（单位：微秒）。   |
| max_delete_elapse   | bigint   | 最大delete的时间花费（单位：微秒）。 |
| min_delete_elapse   | bigint   | 最小delete的时间花费（单位：微秒）。 |
| avg_delete_elapse   | bigint   | 平均delete的时间花费（单位：微秒）。 |



##### SUMMARY_WORKLOAD_SQL_ELAPSE_TIME

统计数据库主节点上workload（业务）负载的SUID信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| node_name           | name     | 数据库进程名称。                     |
| workload            | name     | workload（业务负载）名称。           |
| total_select_elapse | bigint   | 总select的时间花费（单位：微秒）。   |
| max_select_elapse   | bigint   | 最大select的时间花费（单位：微秒）。 |
| min_select_elapse   | bigint   | 最小select的时间花费（单位：微秒）。 |
| avg_select_elapse   | bigint   | 平均select的时间花费（单位：微秒）。 |
| total_update_elapse | bigint   | 总update的时间花费（单位：微秒）。   |
| max_update_elapse   | bigint   | 最大update的时间花费（单位：微秒）。 |
| min_update_elapse   | bigint   | 最小update的时间花费（单位：微秒）。 |
| avg_update_elapse   | bigint   | 平均update的时间花费（单位：微秒）。 |
| total_insert_elapse | bigint   | 总insert的时间花费（单位：微秒）。   |
| max_insert_elapse   | bigint   | 最大insert的时间花费（单位：微秒）。 |
| min_insert_elapse   | bigint   | 最小insert的时间花费（单位：微秒）。 |
| avg_insert_elapse   | bigint   | 平均insert的时间花费（单位：微秒）。 |
| total_delete_elapse | bigint   | 总delete的时间花费（单位：微秒）。   |
| max_delete_elapse   | bigint   | 最大delete的时间花费（单位：微秒）。 |
| min_delete_elapse   | bigint   | 最小delete的时间花费（单位：微秒）。 |
| avg_delete_elapse   | bigint   | 平均delete的时间花费（单位：微秒）。 |



##### USER_TRANSACTION

USER_TRANSACTION用来统计用户执行的事务信息。monadmin用户能看到所有用户执行事务的信息，普通用户只能查询到自己执行的事务信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| username            | name     | 用户的名称。                         |
| commit_counter      | bigint   | 用户事务commit数量。                 |
| rollback_counter    | bigint   | 用户事务rollback数量。               |
| resp_min            | bigint   | 用户事务最小响应时间（单位：微秒）。 |
| resp_max            | bigint   | 用户事务最大响应时间（单位：微秒）。 |
| resp_avg            | bigint   | 用户事务平均响应时间（单位：微秒）。 |
| resp_total          | bigint   | 用户事务总响应时间（单位：微秒）。   |
| bg_commit_counter   | bigint   | 后台事务commit数量。                 |
| bg_rollback_counter | bigint   | 后台事务rollback数量。               |
| bg_resp_min         | bigint   | 后台事务最小响应时间（单位：微秒）。 |
| bg_resp_max         | bigint   | 后台事务最大响应时间（单位：微秒）。 |
| bg_resp_avg         | bigint   | 后台事务平均响应时间（单位：微秒）。 |
| bg_resp_total       | bigint   | 后台事务总响应时间（单位：微秒）。   |



##### GLOBAL_USER_TRANSACTION

统计全局用户执行的事务信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| node_name           | name     | 节点名称。                           |
| username            | name     | 用户的名称。                         |
| commit_counter      | bigint   | 用户事务commit数量。                 |
| rollback_counter    | bigint   | 用户事务rollback数量。               |
| resp_min            | bigint   | 用户事务最小响应时间（单位：微秒）。 |
| resp_max            | bigint   | 用户事务最大响应时间（单位：微秒）。 |
| resp_avg            | bigint   | 用户事务平均响应时间（单位：微秒）。 |
| resp_total          | bigint   | 用户事务总响应时间（单位：微秒）。   |
| bg_commit_counter   | bigint   | 后台事务commit数量。                 |
| bg_rollback_counter | bigint   | 后台事务rollback数量。               |
| bg_resp_min         | bigint   | 后台事务最小响应时间（单位：微秒）。 |
| bg_resp_max         | bigint   | 后台事务最大响应时间（单位：微秒）。 |
| bg_resp_avg         | bigint   | 后台事务平均响应时间（单位：微秒）。 |
| bg_resp_total       | bigint   | 后台事务总响应时间（单位：微秒）。   |



#### 7. Session/Thread

##### SESSION_STAT

当前节点以会话线程或AutoVacuum线程为单位，统计会话状态信息。

| **名称** | **类型** | **描述**                |
| :------- | :------- | :---------------------- |
| sessid   | text     | 线程启动时间+线程标识。 |
| statid   | integer  | 统计编号。              |
| statname | text     | 统计会话名称。          |
| statunit | text     | 统计会话单位。          |
| value    | bigint   | 统计会话值。            |



##### GLOBAL_SESSION_STAT

各节点上以会话线程或AutoVacuum线程为单位，统计会话状态信息。

| **名称**  | **类型** | **描述**                |
| :-------- | :------- | :---------------------- |
| node_name | name     | 数据库进程名称。        |
| sessid    | text     | 线程启动时间+线程标识。 |
| statid    | integer  | 统计编号。              |
| statname  | text     | 统计会话名称。          |
| statunit  | text     | 统计会话单位。          |
| value     | bigint   | 统计会话值。            |



##### SESSION_TIME

用于统计当前节点会话线程的运行时间信息，及各执行阶段所消耗时间。

| **名称**  | **类型** | **描述**                |
| :-------- | :------- | :---------------------- |
| sessid    | text     | 线程启动时间+线程标识。 |
| stat_id   | integer  | 统计编号。              |
| stat_name | text     | 会话类型名称。          |
| value     | bigint   | 会话值。                |



##### GLOBAL_SESSION_TIME

用于统计各节点会话线程的运行时间信息，及各执行阶段所消耗时间。

| **名称**  | **类型** | **描述**                |
| :-------- | :------- | :---------------------- |
| node_name | name     | 数据库进程名称。        |
| sessid    | text     | 线程启动时间+线程标识。 |
| stat_id   | integer  | 统计编号。              |
| stat_name | text     | 会话类型名称。          |
| value     | bigint   | 会话值。                |



##### SESSION_MEMORY

统计Session级别的内存使用情况，包含执行作业在数据节点上openGauss线程和Stream线程分配的所有内存，单位为MB。

| **名称** | **类型** | **描述**                                   |
| :------- | :------- | :----------------------------------------- |
| sessid   | text     | 线程启动时间+线程标识。                    |
| init_mem | integer  | 当前正在执行作业进入执行器前已分配的内存。 |
| used_mem | integer  | 当前正在执行作业已分配的内存。             |
| peak_mem | integer  | 当前正在执行作业已分配的内存峰值。         |



##### GLOBAL_SESSION_MEMORY

统计各节点的Session级别的内存使用情况，包含执行作业在数据节点上openGauss线程和Stream线程分配的所有内存，单位为MB。

| **名称**  | **类型** | **描述**                                   |
| :-------- | :------- | :----------------------------------------- |
| node_name | name     | 数据库进程名称。                           |
| sessid    | text     | 线程启动时间+线程标识。                    |
| init_mem  | integer  | 当前正在执行作业进入执行器前已分配的内存。 |
| used_mem  | integer  | 当前正在执行作业已分配的内存。             |
| peak_mem  | integer  | 当前正在执行作业已分配的内存峰值。         |



##### SESSION_MEMORY_DETAIL

统计线程的内存使用情况，以MemoryContext节点来统计。

| **名称**    | **类型** | **描述**                       |
| :---------- | :------- | :----------------------------- |
| sessid      | text     | 线程启动时间+线程标识。        |
| sesstype    | text     | 线程名称。                     |
| contextname | text     | 内存上下文名称。               |
| level       | smallint | 内存上下文的重要级别。         |
| parent      | text     | 父级内存上下文名称。           |
| totalsize   | bigint   | 总申请内存大小（单位：字节）。 |
| freesize    | bigint   | 空闲内存大小（单位：字节）。   |
| usedsize    | bigint   | 使用内存大小（单位：字节）。   |



##### GLOBAL_SESSION_MEMORY_DETAIL

统计各节点的线程的内存使用情况，以MemoryContext节点来统计。

| **名称**    | **类型** | **描述**                       |
| :---------- | :------- | :----------------------------- |
| node_name   | name     | 数据库进程名称。               |
| sessid      | text     | 线程启动时间+线程标识。        |
| sesstype    | text     | 线程名称。                     |
| contextname | text     | 内存上下文名称。               |
| level       | smallint | 内存上下文的重要级别。         |
| parent      | text     | 父级内存上下文名称。           |
| totalsize   | bigint   | 总申请内存大小（单位：字节）。 |
| freesize    | bigint   | 空闲内存大小（单位：字节）。   |
| usedsize    | bigint   | 使用内存大小（单位：字节）。   |



##### SESSION_STAT_ACTIVITY

显示当前节点上正在运行的线程相关的信息。

关于state字段，为该后台当前总体状态。可能值是：

- active：后台正在执行一个查询。

- idle：后台正在等待一个新的客户端命令。

- idle in transaction：后台在事务中，但是目前无法执行查询。

- idle in transaction (aborted)：这个状态除说明事务中有某个语句导致了错误外，类似于idle in transaction

- fastpath function call：后台正在执行一个fast-path函数。

- disabled：如果后台禁用track_activities，则报告这个状态。

  说明：

  普通用户只能查看到自己帐户所对应的会话状态。即其他帐户的state信息为空。例如以judy用户连接数据库后，在pg_stat_activity中查看到的普通用户joe及初始用户omm的stat信息为空。

  ```sql
  openGauss=# SELECT datname, usename, usesysid,state,pid FROM pg_stat_activity;
  datname    | usename | usesysid | state    |       pid
  ----------+---------+----------+--------+-----------------postgres  | omm       | 10       |        |139968752121616
  postgres  | omm       | 10       |        |139968903116560
  db_tpcds  | judy      | 16398    | active |139968391403280
  postgres  | omm       | 10       |          |139968643069712
  postgres  | omm       | 10       |        |139968680818448
  postgres  | joe       | 16390    |        |139968563377936
  (6 rows)
  ```

| **名称**         | **类型**                | **描述**                                                     |
| :--------------- | :---------------------- | :----------------------------------------------------------- |
| datid            | oid                     | 用户会话在后台连接到的数据库OID。                            |
| datname          | name                    | 用户会话在后台连接到的数据库名称。                           |
| pid              | bigint                  | 后台线程ID。                                                 |
| usesysid         | oid                     | 登录该后台的用户OID。                                        |
| usename          | name                    | 登录该后台的用户名。                                         |
| application_name | text                    | 连接到该后台的应用名。                                       |
| client_addr      | inet                    | 连接到该后台的客户端的IP地址。如果此字段是null，它表明通过服务器机器上UNIX套接字连接客户端或者这是内部进程，如autovacuum。 |
| client_hostname  | text                    | 客户端的主机名，这个字段是通过client_addr的反向DNS查找得到。这个字段只有在启动log_hostname且使用IP连接时才非空。 |
| client_port      | integer                 | 客户端用于与后台通讯的TCP端口号，如果使用Unix套接字，则为-1。 |
| backend_start    | timestampwith time zone | 该过程开始的时间，即当客户端连接服务器时间。                 |
| xact_start       | timestampwith time zone | 启动当前事务的时间，如果没有事务是活跃的，则为null。如果当前查询是首个事务，则这列等同于query_start列。 |
| query_start      | timestampwith time zone | 开始当前活跃查询的时间，如果state的值不是active，则这个值是上一个查询的开始时间。 |
| state_change     | timestampwith time zone | 上次状态改变的时间。                                         |
| waiting          | boolean                 | 如果后台当前正等待锁则为true。                               |
| enqueue          | text                    | 该字段不支持。                                               |
| state            | text                    | 该后台当前总体状态。                                         |
| resource_pool    | name                    | 用户使用的资源池。                                           |
| query_id         | bigint                  | 查询语句的ID。                                               |
| query            | text                    | 该后台的最新查询。如果state状态是active（活跃的），此字段显示当前正在执行的查询。所有其他情况表示上一个查询。 |
| unique_sql_id    | bigint                  | 语句的unique sql id。                                        |
| trace_id         | text                    | 驱动传入的trace id，与应用的一次请求相关联。                 |



##### GLOBAL_SESSION_STAT_ACTIVITY

显示openGauss内各节点上正在运行的线程相关的信息。

| **名称**         | **类型**                | **描述**                                                     |
| :--------------- | :---------------------- | :----------------------------------------------------------- |
| coorname         | text                    | 数据库进程名称。                                             |
| datid            | oid                     | 用户会话在后台连接到的数据库OID。                            |
| datname          | text                    | 用户会话在后台连接到的数据库名称。                           |
| pid              | bigint                  | 后台线程ID。                                                 |
| usesysid         | oid                     | 登录该后台的用户OID。                                        |
| usename          | text                    | 登录该后台的用户名。                                         |
| application_name | text                    | 连接到该后台的应用名。                                       |
| client_addr      | inet                    | 连接到该后台的客户端的IP地址。如果此字段是null，它表明通过服务器机器上UNIX套接字连接客户端或者这是内部进程，如autovacuum。 |
| client_hostname  | text                    | 客户端的主机名，这个字段是通过client_addr的反向DNS查找得到。这个字段只有在启动log_hostname且使用IP连接时才非空。 |
| client_port      | integer                 | 客户端用于与后台通讯的TCP端口号，如果使用Unix套接字，则为-1。 |
| backend_start    | timestampwith time zone | 该过程开始的时间，即当客户端连接服务器时间。                 |
| xact_start       | timestampwith time zone | 启动当前事务的时间，如果没有事务是活跃的，则为null。如果当前查询是首个事务，则这列等同于query_start列。 |
| query_start      | timestampwith time zone | 开始当前活跃查询的时间，如果state的值不是active，则这个值是上一个查询的开始时间。 |
| state_change     | timestampwith time zone | 上次状态改变的时间。                                         |
| waiting          | boolean                 | 如果后台当前正等待锁则为true。                               |
| enqueue          | text                    | 该字段不支持。                                               |
| state            | text                    | 该后台当前总体状态。                                         |
| resource_pool    | name                    | 用户使用的资源池。                                           |
| query_id         | bigint                  | 查询语句的ID。                                               |
| query            | text                    | 该后台的最新查询。如果state状态是active（活跃的），此字段显示当前正在执行的查询。所有其他情况表示上一个查询。 |
| unique_sql_id    | bigint                  | 语句的unique sql id。                                        |
| trace_id         | text                    | 驱动传入的trace id，与应用的一次请求相关联。                 |



##### THREAD_WAIT_STATUS

通过该视图可以检测当前实例中工作线程（backend thread）以及辅助线程（auxiliary thread）的阻塞等待情况。

| **名称**    | **类型** | **描述**                                                     |
| ----------- | -------- | ------------------------------------------------------------ |
| node_name   | text     | 数据库进程名称。                                             |
| db_name     | text     | 数据库名称。                                                 |
| thread_name | text     | 线程名称。                                                   |
| query_id    | bigint   | 查询ID，对应debug_query_id。                                 |
| tid         | bigint   | 当前线程的线程号。                                           |
| sessionid   | bigint   | session的ID。                                                |
| lwtid       | integer  | 当前线程的轻量级线程号。                                     |
| psessionid  | bigint   | streaming线程的父线程。                                      |
| tlevel      | integer  | streaming线程的层级。                                        |
| smpid       | integer  | 并行线程的ID。                                               |
| wait_status | text     | 当前线程的等待状态。等待状态的详细信息请参见[15.3.67-表2 等待状态列表](https://docs.opengauss.org/zh/docs/3.0.0/docs/Developerguide/PG_THREAD_WAIT_STATUS.html#zh-cn_topic_0283136724_zh-cn_topic_0237122466_zh-cn_topic_0059777957_t794f802302c24514a5db22d51eabacc4)。 |
| wait_event  | text     | 如果wait_status是acquire lock、acquire lwlock、wait io三种类型，此列描述具体的锁、轻量级锁、IO的信息。否则为空。 |



##### GLOBAL_THREAD_WAIT_STATUS

通过该视图可以检测所有节点上工作线程（backend thread）以及辅助线程（auxiliary thread）的阻塞等待情况。

通过GLOBAL_THREAD_WAIT_STATUS视图，可以查看openGauss全局各个节点上所有SQL语句产生的线程之间的调用层次关系，以及各个线程的阻塞等待状态，从而更容易定位hang以及类似现象的原因。

GLOBAL_THREAD_WAIT_STATUS视图和THREAD_WAIT_STATUS视图列定义完全相同，这是由于GLOBAL_THREAD_WAIT_STATUS视图本质是到openGauss中各个节点上查询THREAD_WAIT_STATUS视图汇总的结果。



##### LOCAL_THREADPOOL_STATUS

LOCAL_THREADPOOL_STATUS视图显示线程池下工作线程及会话的状态信息。该视图仅在线程池开启（enable_thread_pool = on）时生效。

| 名称            | 类型    | 描述                                                         |
| :-------------- | :------ | :----------------------------------------------------------- |
| node_name       | text    | 数据库进程名称。                                             |
| group_id        | integer | 线程池组ID。                                                 |
| bind_numa_id    | integer | 该线程池组绑定的NUMA ID。                                    |
| bind_cpu_number | integer | 该线程池组绑定的CPU信息。如果未绑定CPU，该值为NULL。         |
| listener        | integer | 该线程池组的Listener线程数量。                               |
| worker_info     | text    | 线程池中线程相关信息，包括以下信息：default：该线程池组中的初始线程数量。new：该线程池组中新增线程的数量。expect：该线程池组中预期线程的数量。actual：该线程池组中实际线程的数量。idle：该线程池组中空闲线程的数量。pending：该线程池组中等待线程的数量。 |
| session_info    | text    | 线程池中会话相关信息，包括以下信息：total：该线程池组中所有的会话数量。waiting：该线程池组中等待调度的会话数量。running：该线程池中正在执行的会话数量。idle：该线程池组中空闲的会话数量。 |
| stream_info     | text    | stream池相关信息，包含以下信息：total：该stream池组中所有的线程数量。running：该stream池中正在执行的线程数量。idle：该stream池组中空闲的线程数量。 |



##### GLOBAL_THREADPOOL_STATUS

GLOBAL_THREADPOOL_STATUS视图显示在所有节点上的线程池中工作线程及会话的状态信息。

字段同LOCAL_THREADPOOL_STATUS一致



##### SESSION_CPU_RUNTIME

显示和当前用户执行复杂作业（正在运行）时的负载管理CPU使用的信息。

| 名称           | 类型                     | 描述                                        |
| :------------- | :----------------------- | :------------------------------------------ |
| datid          | oid                      | 连接后端的数据库OID。                       |
| usename        | name                     | 登录到该后端的用户名。                      |
| pid            | bigint                   | 后端线程ID。                                |
| start_time     | timestamp with time zone | 语句执行的开始时间。                        |
| min_cpu_time   | bigint                   | 语句在数据库节点上的最小CPU时间，单位为ms。 |
| max_cpu_time   | bigint                   | 语句在数据库节点上的最大CPU时间，单位为ms。 |
| total_cpu_time | bigint                   | 语句在数据库节点上的CPU总时间，单位为ms。   |
| query          | text                     | 正在执行的语句。                            |
| node_group     | text                     | 语句所属用户对应的逻辑openGauss。           |
| top_cpu_dn     | text                     | cpu使用量topN信息。                         |



##### SESSION_MEMORY_RUNTIME

显示和当前用户执行复杂作业正在运行时的负载管理内存使用的信息。

| 名称            | 类型                     | 描述                                                         |
| :-------------- | :----------------------- | :----------------------------------------------------------- |
| datid           | oid                      | 连接后端的数据库OID。                                        |
| usename         | name                     | 登录到该后端的用户名。                                       |
| pid             | bigint                   | 后端线程ID。                                                 |
| start_time      | timestamp with time zone | 语句执行的开始时间。                                         |
| min_peak_memory | integer                  | 语句在数据库节点上的最小内存峰值大小，单位MB。               |
| max_peak_memory | integer                  | 语句在数据库节点上的最大内存峰值大小，单位MB。               |
| spill_info      | text                     | 语句在数据库节点上的下盘信息：None：数据库节点均未下盘。All：数据库节点均下盘。[a:b]：数量为b个数据库节点中有a个数据库节点下盘。 |
| query           | text                     | 正在执行的语句。                                             |
| node_group      | text                     | 语句所属用户对应的逻辑openGauss。                            |
| top_mem_dn      | text                     | mem使用量topN信息。                                          |



##### STATEMENT_IOSTAT_COMPLEX_RUNTIME

显示当前用户执行作业正在运行时的IO负载管理相关信息。以下涉及到iops，对于行存，均以万次/s为单位，对于列存，均以次/s为单位。

| 名称        | 类型    | 描述                                               |
| :---------- | :------ | :------------------------------------------------- |
| query_id    | bigint  | 作业id。                                           |
| mincurriops | integer | 该作业当前io在各数据库节点中的最小值。             |
| maxcurriops | integer | 该作业当前io在各数据库节点中的最大值。             |
| minpeakiops | integer | 在作业运行时，作业io峰值中，各数据库节点的最小值。 |
| maxpeakiops | integer | 在作业运行时，作业io峰值中，各数据库节点的最大值。 |
| io_limits   | integer | 该作业所设GUC参数io_limits。                       |
| io_priority | text    | 该作业所设GUC参数io_priority。                     |
| query       | text    | 作业。                                             |
| node_group  | text    | 作业所属用户对应的逻辑openGauss。                  |



#### 8. Transaction

##### TRANSACTIONS_PREPARED_XACTS

显示当前准备好进行两阶段提交的事务的信息。

| **名称**    | **类型**                 | **描述**                   |
| :---------- | :----------------------- | :------------------------- |
| transaction | xid                      | 预备事务的数字事务标识。   |
| gid         | text                     | 赋予该事务的全局事务标识。 |
| prepared    | timestamp with time zone | 事务准备好提交的时间。     |
| owner       | name                     | 执行该事务的用户的名称。   |
| database    | name                     | 执行该事务所在的数据库名。 |



##### SUMMARY_TRANSACTIONS_PREPARED_XACTS

显示openGauss中数据库主节点当前准备好进行两阶段提交的事务的信息。

| **名称**    | **类型**                 | **描述**                   |
| :---------- | :----------------------- | :------------------------- |
| transaction | xid                      | 预备事务的数字事务标识。   |
| gid         | text                     | 赋予该事务的全局事务标识。 |
| prepared    | timestamp with time zone | 事务准备好提交的时间。     |
| owner       | name                     | 执行该事务的用户的名称。   |
| database    | name                     | 执行该事务所在的数据库名。 |



##### GLOBAL_TRANSACTIONS_PREPARED_XACTS

显示各节点当前准备好进行两阶段提交的事务的信息。

| **名称**    | **类型**                 | **描述**                   |
| :---------- | :----------------------- | :------------------------- |
| transaction | xid                      | 预备事务的数字事务标识。   |
| gid         | text                     | 赋予该事务的全局事务标识。 |
| prepared    | timestamp with time zone | 事务准备好提交的时间。     |
| owner       | name                     | 执行该事务的用户的名称。   |
| database    | name                     | 执行该事务所在的数据库名。 |



##### TRANSACTIONS_RUNNING_XACTS

显示当前节点运行事务的信息。

| **名称**    | **类型** | **描述**                                                  |
| :---------- | :------- | :-------------------------------------------------------- |
| handle      | integer  | 事务对应的事务管理器中的槽位句柄，该值恒为-1。            |
| gxid        | xid      | 事务id号。                                                |
| state       | tinyint  | 事务状态（3：prepared或者0：starting）。                  |
| node        | text     | 节点名称。                                                |
| xmin        | xid      | 节点上当前数据涉及的最小事务号xmin。                      |
| vacuum      | boolean  | 标志当前事务是否是lazy vacuum事务。                       |
| timeline    | bigint   | 标志数据库重启次数。                                      |
| prepare_xid | xid      | 处于prepared状态的事务的id号，若不在prepared状态，值为0。 |
| pid         | bigint   | 事务对应的线程id。                                        |
| next_xid    | xid      | 其余节点发送给当前节点的事务id，该值恒为0。               |



##### SUMMARY_TRANSACTIONS_RUNNING_XACTS

显示集群中各个节点运行事务的信息，字段内容和transactions_running_xacts一致。

| **名称**    | **类型** | **描述**                                                  |
| :---------- | :------- | :-------------------------------------------------------- |
| handle      | integer  | 事务对应的事务管理器中的槽位句柄，该值恒为-1。            |
| gxid        | xid      | 事务id号。                                                |
| state       | tinyint  | 事务状态（3：prepared或者0：starting）。                  |
| node        | text     | 节点名称。                                                |
| xmin        | xid      | 节点上当前数据涉及的最小事务号xmin。                      |
| vacuum      | boolean  | 标志当前事务是否是lazy vacuum事务。                       |
| timeline    | bigint   | 标志数据库重启次数。                                      |
| prepare_xid | xid      | 处于prepared状态的事务的id号，若不在prepared状态，值为0。 |
| pid         | bigint   | 事务对应的线程id。                                        |
| next_xid    | xid      | 其余节点发送给当前节点的事务id，该值恒为0。               |



##### GLOBAL_TRANSACTIONS_RUNNING_XACTS

显示集群中各个节点运行事务的信息。

| **名称**    | **类型** | **描述**                                                  |
| :---------- | :------- | :-------------------------------------------------------- |
| handle      | integer  | 事务对应的事务管理器中的槽位句柄，该值恒为-1              |
| gxid        | xid      | 事务id号。                                                |
| state       | tinyint  | 事务状态（3：prepared或者0：starting）。                  |
| node        | text     | 节点名称。                                                |
| xmin        | xid      | 节点上当前数据涉及的最小事务号xmin。                      |
| vacuum      | boolean  | 标志当前事务是否是lazy vacuum事务。                       |
| timeline    | bigint   | 标志数据库重启次数。                                      |
| prepare_xid | xid      | 处于prepared状态的事务的id号，若不在prepared状态，值为0。 |
| pid         | bigint   | 事务对应的线程id。                                        |
| next_xid    | xid      | 其余节点发送给当前节点的事务id，该值恒为0。               |



#### 9. Query

##### STATEMENT

获得当前节点的执行语句（归一化SQL）的信息。查询视图必须具有sysadmin权限或者monitor admin权限。数据库主节点上可以看到此数据库主节点接收到的归一化的SQL的全量统计信息（包含数据库节点）；数据库节点上仅可看到归一化的SQL的此节点执行的统计信息。

| **名称**             | **类型**                 | **描述**                                                     |
| :------------------- | :----------------------- | :----------------------------------------------------------- |
| node_name            | name                     | 数据库进程名称。                                             |
| node_id              | integer                  | 节点的ID。                                                   |
| user_name            | name                     | 用户名称。                                                   |
| user_id              | oid                      | 用户OID。                                                    |
| unique_sql_id        | bigint                   | 归一化的SQL ID。                                             |
| query                | text                     | 归一化的SQL。备注：长度受track_activity_query_size控制。     |
| n_calls              | bigint                   | 调用次数。                                                   |
| min_elapse_time      | bigint                   | SQL在内核内的最小运行时间（单位：微秒）。                    |
| max_elapse_time      | bigint                   | SQL在内核内的最大运行时间（单位：微秒）。                    |
| total_elapse_time    | bigint                   | SQL在内核内的总运行时间（单位：微秒）。                      |
| n_returned_rows      | bigint                   | SELECT返回的结果集行数。                                     |
| n_tuples_fetched     | bigint                   | 随机扫描行。                                                 |
| n_tuples_returned    | bigint                   | 顺序扫描行。                                                 |
| n_tuples_inserted    | bigint                   | 插入行。                                                     |
| n_tuples_updated     | bigint                   | 更新行。                                                     |
| n_tuples_deleted     | bigint                   | 删除行。                                                     |
| n_blocks_fetched     | bigint                   | buffer的块访问次数。                                         |
| n_blocks_hit         | bigint                   | buffer的块命中次数。                                         |
| n_soft_parse         | bigint                   | 软解析次数，n_soft_parse + n_hard_parse可能大于n_calls，因为子查询未计入n_calls。 |
| n_hard_parse         | bigint                   | 硬解析次数，n_soft_parse + n_hard_parse可能大于n_calls，因为子查询未计入n_calls。 |
| db_time              | bigint                   | 有效的DB时间花费，多线程将累加（单位：微秒）。               |
| cpu_time             | bigint                   | CPU时间（单位：微秒）。                                      |
| execution_time       | bigint                   | 执行器内执行时间（单位：微秒）。                             |
| parse_time           | bigint                   | SQL解析时间（单位：微秒）。                                  |
| plan_time            | bigint                   | SQL生成计划时间（单位：微秒）。                              |
| rewrite_time         | bigint                   | SQL重写时间（单位：微秒）。                                  |
| pl_execution_time    | bigint                   | plpgsql上的执行时间（单位：微秒）。                          |
| pl_compilation_time  | bigint                   | plpgsql上的编译时间（单位：微秒）。                          |
| data_io_time         | bigint                   | IO上的时间花费（单位：微秒）。                               |
| net_send_info        | text                     | 通过物理连接发送消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| net_recv_info        | text                     | 通过物理连接接收消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| net_stream_send_info | text                     | 通过逻辑连接发送消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| net_stream_recv_info | text                     | 通过逻辑连接接收消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| sort_count           | bigint                   | 排序执行的次数。                                             |
| sort_time            | bigint                   | 排序执行的时间（单位：微秒）。                               |
| sort_mem_used        | bigint                   | 排序过程中使用的work memory大小（单位：KB）。                |
| sort_spill_count     | bigint                   | 排序过程中，若发生落盘，写文件的次数。                       |
| sort_spill_size      | bigint                   | 排序过程中，若发生落盘，使用的文件大小（单位：KB）。         |
| hash_count           | bigint                   | hash执行的次数。                                             |
| hash_time            | bigint                   | hash执行的时间（单位：微秒）。                               |
| hash_mem_used        | bigint                   | hash过程中使用的work memory大小（单位：KB）。                |
| hash_spill_count     | bigint                   | hash过程中，若发生落盘，写文件的次数。                       |
| hash_spill_size      | bigint                   | hash过程中，若发生落盘，使用的文件大小（单位：KB）。         |
| last_updated         | timestamp with time zone | 最后一次更新该语句的时间。                                   |

STATEMENT对应系统函数get_instr_unique_sql，主要目的是保留数据库启动后，运行的SQL的状态记录。

一般使用形式：

```makefile
openGauss=# select * from dbe_perf.statement;
```

主要受到以下参数控制：

- enable_resource_track：允许运行时候的资源使用追踪。
- instr_unique_sql_count：允许记录在内存中的SQL总数量。每次修改此参数，都会重置掉内存中已经存在的所有的归一化SQL。
- instr_unique_sql_track_type：归一化SQL追踪的方式，参数取值为top、all，目前仅支持top，对于存储过程，仅记录最外层调用而非所有SQL。
- enable_auto_clean_unique_sql：是否打开归一化SQL的自动清理机制，当记录达到上限后，可以自动随机清理其中10%的记录。如果不打开，则会记录错误日志，SQL相关内容也不会记录到内存中。



##### SUMMARY_STATEMENT

获得各数据库主节点的执行语句（归一化SQL）的全量信息（包含数据库节点）。

除了last_updated没有，其余字段同上。



##### STATEMENT_COUNT

显示数据库当前节点当前时刻执行的五类语句（SELECT、INSERT、UPDATE、DELETE、MERGE INTO）和（DDL、DML、DCL）统计信息。

普通用户查询STATEMENT_COUNT视图仅能看到该用户当前节点的统计信息；管理员权限用户查询STATEMENT_COUNT视图则能看到所有用户当前节点的统计信息。当openGauss或该节点重启时，计数将清零，并重新开始计数。计数以节点收到的查询数为准，openGauss内部进行的查询。例如，数据库主节点收到一条查询，若下发多条查询数据库节点，那将在数据库节点上进行相应次数的计数。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| node_name           | text     | 数据库进程名称。                     |
| user_name           | text     | 用户名。                             |
| select_count        | bigint   | select语句统计结果。                 |
| update_count        | bigint   | update语句统计结果。                 |
| insert_count        | bigint   | insert语句统计结果。                 |
| delete_count        | bigint   | delete语句统计结果。                 |
| mergeinto_count     | bigint   | merge into语句统计结果。             |
| ddl_count           | bigint   | DDL语句的数量。                      |
| dml_count           | bigint   | DML语句的数量。                      |
| dcl_count           | bigint   | DCL语句的数量。                      |
| total_select_elapse | bigint   | 总select的时间花费（单位：微秒）。   |
| avg_select_elapse   | bigint   | 平均select的时间花费（单位：微秒）。 |
| max_select_elapse   | bigint   | 最大select的时间花费(单位：微秒)。   |
| min_select_elapse   | bigint   | 最小select的时间花费（单位：微秒）。 |
| total_update_elapse | bigint   | 总update的时间花费（单位：微秒）。   |
| avg_update_elapse   | bigint   | 平均update的时间花费(单位：微秒)。   |
| max_update_elapse   | bigint   | 最大update的时间花费（单位：微秒）。 |
| min_update_elapse   | bigint   | 最小update的时间花费（单位：微秒）。 |
| total_insert_elapse | bigint   | 总insert的时间花费（单位：微秒）。   |
| avg_insert_elapse   | bigint   | 平均insert的时间花费（单位：微秒）。 |
| max_insert_elapse   | bigint   | 最大insert的时间花费（单位：微秒）。 |
| min_insert_elapse   | bigint   | 最小insert的时间花费（单位：微秒）。 |
| total_delete_elapse | bigint   | 总delete的时间花费（单位：微秒）。   |
| avg_delete_elapse   | bigint   | 平均delete的时间花费（单位：微秒）。 |
| max_delete_elapse   | bigint   | 最大delete的时间花费（单位：微秒）。 |
| min_delete_elapse   | bigint   | 最小delete的时间花费（单位：微秒）。 |



##### GLOBAL_STATEMENT_COUNT

显示数据库各节点当前时刻执行的五类语句（SELECT、INSERT、UPDATE、DELETE、MERGE INTO）和（DDL、DML、DCL）统计信息。

字段同上。



##### SUMMARY_STATEMENT_COUNT

显示数据库汇聚各节点（数据库节点）当前时刻执行的五类语句（SELECT、INSERT、UPDATE、DELETE、MERGE INTO）和（DDL、DML、DCL）统计信息。

| **名称**            | **类型** | **描述**                             |
| :------------------ | :------- | :----------------------------------- |
| user_name           | text     | 用户名。                             |
| select_count        | numeric  | select语句统计结果。                 |
| update_count        | numeric  | update语句统计结果。                 |
| insert_count        | numeric  | insert语句统计结果。                 |
| delete_count        | numeric  | delete语句统计结果。                 |
| mergeinto_count     | numeric  | merge into语句统计结果。             |
| ddl_count           | numeric  | DDL语句的数量。                      |
| dml_count           | numeric  | DML语句的数量。                      |
| dcl_count           | numeric  | DCL语句的数量。                      |
| total_select_elapse | numeric  | 总select的时间花费（单位：微秒）。   |
| avg_select_elapse   | bigint   | 平均select的时间花费（单位：微秒）。 |
| max_select_elapse   | bigint   | 最大select的时间花费（单位：微秒）。 |
| min_select_elapse   | bigint   | 最小select的时间花费（单位：微秒）。 |
| total_update_elapse | numeric  | 总update的时间花费（单位：微秒）。   |
| avg_update_elapse   | bigint   | 平均update的时间花费（单位：微秒）。 |
| max_update_elapse   | bigint   | 最大update的时间花费（单位：微秒）。 |
| min_update_elapse   | bigint   | 最小update的时间花费（单位：微秒）。 |
| total_insert_elapse | numeric  | 总insert的时间花费（单位：微秒）。   |
| avg_insert_elapse   | bigint   | 平均insert的时间花费（单位：微秒）。 |
| max_insert_elapse   | bigint   | 最大insert的时间花费（单位：微秒）。 |
| min_insert_elapse   | bigint   | 最小insert的时间花费（单位：微秒）。 |
| total_delete_elapse | numeric  | 总delete的时间花费（单位：微秒）。   |
| avg_delete_elapse   | bigint   | 平均delete的时间花费（单位：微秒）。 |
| max_delete_elapse   | bigint   | 最大delete的时间花费（单位：微秒）。 |
| min_delete_elapse   | bigint   | 最小delete的时间花费（单位：微秒）。 |



##### GLOBAL_STATEMENT_COMPLEX_HISTORY

显示各个节点执行作业结束后的负载管理记录。

| 名称                | 类型                     | 描述                                                         |
| :------------------ | :----------------------- | :----------------------------------------------------------- |
| datid               | oid                      | 连接后端的数据库OID。                                        |
| dbname              | text                     | 连接后端的数据库名称。                                       |
| schemaname          | text                     | 模式的名称。                                                 |
| nodename            | text                     | 数据库进程名称。                                             |
| username            | text                     | 连接到后端的用户名。                                         |
| application_name    | text                     | 连接到后端的应用名。                                         |
| client_addr         | inet                     | 连接到后端的客户端的IP地址。如果此字段是null，它表明通过服务器机器上UNIX套接字连接客户端或者这是内部进程，如autovacuum。 |
| client_hostname     | text                     | 客户端的主机名，这个字段是通过client_addr的反向DNS查找得到。这个字段只有在启动log_hostname且使用IP连接时才非空。 |
| client_port         | integer                  | 客户端用于与后端通讯的TCP端口号，如果使用Unix套接字，则为-1。 |
| query_band          | text                     | 用于标示作业类型，可通过GUC参数query_band进行设置，默认为空字符串。 |
| block_time          | bigint                   | 语句执行前的阻塞时间，包含语句解析和优化时间，单位ms。       |
| start_time          | timestamp with time zone | 语句执行的开始时间。                                         |
| finish_time         | timestamp with time zone | 语句执行的结束时间。                                         |
| duration            | bigint                   | 语句实际执行的时间，单位ms。                                 |
| estimate_total_time | bigint                   | 语句预估执行时间，单位ms。                                   |
| status              | text                     | 语句执行结束状态：正常为finished，异常为aborted。            |
| abort_info          | text                     | 语句执行结束状态为aborted时显示异常信息。                    |
| resource_pool       | text                     | 用户使用的资源池。                                           |
| control_group       | text                     | 语句所使用的Cgroup。                                         |
| estimate_memory     | integer                  | 语句预估使用内存。                                           |
| min_peak_memory     | integer                  | 语句在数据库节点上的最小内存峰值，单位MB。                   |
| max_peak_memory     | integer                  | 语句在数据库节点上的最大内存峰值，单位MB。                   |
| average_peak_memory | integer                  | 语句执行过程中的内存使用平均值，单位MB。                     |
| memory_skew_percent | integer                  | 语句数据库节点间的内存使用倾斜率。                           |
| spill_info          | text                     | 语句在数据库节点上的下盘信息：None：数据库节点均未下盘。All：数据库节点均下盘。[a:b]：数量为b个数据库节点中有a个数据库节点下盘。 |
| min_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最小数据量，单位MB，默认为0。  |
| max_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最大数据量，单位MB，默认为0。  |
| average_spill_size  | integer                  | 若发生下盘，数据库节点上下盘的平均数据量，单位MB，默认为0。  |
| spill_skew_percent  | integer                  | 若发生下盘，数据库节点间下盘倾斜率。                         |
| min_dn_time         | bigint                   | 语句在数据库节点上的最小执行时间，单位ms。                   |
| max_dn_time         | bigint                   | 语句在数据库节点上的最大执行时间，单位ms。                   |
| average_dn_time     | bigint                   | 语句在数据库节点上的平均执行时间，单位ms。                   |
| dntime_skew_percent | integer                  | 语句在数据库节点的执行时间倾斜率。                           |
| min_cpu_time        | bigint                   | 语句在数据库节点上的最小CPU时间，单位ms。                    |
| max_cpu_time        | bigint                   | 语句在数据库节点上的最大CPU时间，单位ms。                    |
| total_cpu_time      | bigint                   | 语句在数据库节点上的CPU总时间，单位ms。                      |
| cpu_skew_percent    | integer                  | 语句在数据库节点间的CPU时间倾斜率。                          |
| min_peak_iops       | integer                  | 语句在数据库节点上的每秒最小IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| max_peak_iops       | integer                  | 语句在数据库节点上的每秒最大IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| average_peak_iops   | integer                  | 语句在数据库节点上的每秒平均IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| iops_skew_percent   | integer                  | 语句在数据库节点间的IO倾斜率。                               |
| warning             | text                     | 主要显示如下几类告警信息：Spill file size large than 256MB。Broadcast size large than 100MB。Early spill。Spill times is greater than 3。Spill on memory adaptive。Hash table conflict。 |
| queryid             | bigint                   | 语句执行使用的内部query id。                                 |
| query               | text                     | 执行的语句。                                                 |
| query_plan          | text                     | 语句的执行计划。                                             |
| node_group          | text                     | 语句所属用户对应的逻辑openGauss。                            |
| cpu_top1_node_name  | text                     | cpu使用率第1的节点名称。                                     |
| cpu_top2_node_name  | text                     | cpu使用率第2的节点名称。                                     |
| cpu_top3_node_name  | text                     | cpu使用率第3的节点名称。                                     |
| cpu_top4_node_name  | text                     | cpu使用率第4的节点名称。                                     |
| cpu_top5_node_name  | text                     | cpu使用率第5的节点名称。                                     |
| mem_top1_node_name  | text                     | 内存使用量第1的节点名称。                                    |
| mem_top2_node_name  | text                     | 内存使用量第2的节点名称。                                    |
| mem_top3_node_name  | text                     | 内存使用量第3的节点名称。                                    |
| mem_top4_node_name  | text                     | 内存使用量第4的节点名称。                                    |
| mem_top5_node_name  | text                     | 内存使用量第5的节点名称。                                    |
| cpu_top1_value      | bigint                   | cpu使用率。                                                  |
| cpu_top2_value      | bigint                   | cpu使用率。                                                  |
| cpu_top3_value      | bigint                   | cpu使用率。                                                  |
| cpu_top4_value      | bigint                   | cpu使用率。                                                  |
| cpu_top5_value      | bigint                   | cpu使用率。                                                  |
| mem_top1_value      | bigint                   | 内存使用量。                                                 |
| mem_top2_value      | bigint                   | 内存使用量。                                                 |
| mem_top3_value      | bigint                   | 内存使用量。                                                 |
| mem_top4_value      | bigint                   | 内存使用量。                                                 |
| mem_top5_value      | bigint                   | 内存使用量。                                                 |
| top_mem_dn          | text                     | 内存使用量topN信息。                                         |
| top_cpu_dn          | text                     | cpu使用量topN信息。                                          |



##### GLOBAL_STATEMENT_COMPLEX_HISTORY_TABLE

显示各个节点执行作业结束后的负载管理记录。此数据是从内核中转储到系统表中的数据。

字段同上。



##### GLOBAL_STATEMENT_COMPLEX_RUNTIME

显示当前用户在各个节点上正在执行的作业的负载管理记录。

| 名称                | 类型                     | 描述                                                         |
| :------------------ | :----------------------- | :----------------------------------------------------------- |
| datid               | oid                      | 连接后端的数据OID。                                          |
| dbname              | name                     | 连接后端的数据库名称。                                       |
| schemaname          | text                     | 模式的名称。                                                 |
| nodename            | text                     | 数据库进程名称                                               |
| username            | name                     | 连接到后端的用户名。                                         |
| application_name    | text                     | 连接到后端的应用名。                                         |
| client_addr         | inet                     | 连接到后端的客户端的IP地址。如果此字段是null，它表明通过服务器机器上UNIX套接字连接客户端或者这是内部进程，如autovacuum。 |
| client_hostname     | text                     | 客户端的主机名，这个字段是通过client_addr的反向DNS查找得到。这个字段只有在启动log_hostname且使用IP连接时才非空。 |
| client_port         | integer                  | 客户端用于与后端通讯的TCP端口号，如果使用Unix套接字，则为-1。 |
| query_band          | text                     | 用于标示作业类型，可通过GUC参数query_band进行设置，默认为空字符串。 |
| pid                 | bigint                   | 后端线程ID。                                                 |
| block_time          | bigint                   | 语句执行前的阻塞时间，单位ms。                               |
| start_time          | timestamp with time zone | 语句执行的开始时间。                                         |
| duration            | bigint                   | 语句已经执行的时间，单位ms。                                 |
| estimate_total_time | bigint                   | 语句执行预估总时间，单位ms。                                 |
| estimate_left_time  | bigint                   | 语句执行预估剩余时间，单位ms。                               |
| enqueue             | text                     | 工作负载管理资源状态。                                       |
| resource_pool       | name                     | 用户使用的资源池。                                           |
| control_group       | text                     | 语句所使用的Cgroup。                                         |
| estimate_memory     | integer                  | 语句预估使用内存，单位MB。                                   |
| min_peak_memory     | integer                  | 语句在数据库节点上的最小内存峰值，单位MB。                   |
| max_peak_memory     | integer                  | 语句在数据库节点上的最大内存峰值，单位MB。                   |
| average_peak_memory | integer                  | 语句执行过程中的内存使用平均值，单位MB。                     |
| memory_skew_percent | integer                  | 语句在数据库节点间的内存使用倾斜率。                         |
| spill_info          | text                     | 语句在数据库节点上的下盘信息：None：数据库节点均未下盘。All：数据库节点均下盘。[a:b]：数量为b个数据库节点中有a个数据库节点下盘。 |
| min_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最小数据量，单位MB，默认为0。  |
| max_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最大数据量，单位MB，默认为0。  |
| average_spill_size  | integer                  | 若发生下盘，数据库节点上下盘的平均数据量，单位MB，默认为0。  |
| spill_skew_percent  | integer                  | 若发生下盘，数据库节点间下盘倾斜率。                         |
| min_dn_time         | bigint                   | 语句在数据库节点上的最小执行时间，单位ms。                   |
| max_dn_time         | bigint                   | 语句在数据库节点上的最大执行时间，单位ms。                   |
| average_dn_time     | bigint                   | 语句在数据库节点上的平均执行时间，单位ms。                   |
| dntime_skew_percent | integer                  | 语句在数据库节点的执行时间倾斜率。                           |
| min_cpu_time        | bigint                   | 语句在数据库节点上的最小CPU时间，单位ms。                    |
| max_cpu_time        | bigint                   | 语句在数据库节点上的最大CPU时间，单位ms。                    |
| total_cpu_time      | bigint                   | 语句在数据库节点上的CPU总时间，单位ms。                      |
| cpu_skew_percent    | integer                  | 语句在数据库节点间的CPU时间倾斜率。                          |
| min_peak_iops       | integer                  | 语句在数据库节点上的每秒最小IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| max_peak_iops       | integer                  | 语句在数据库节点上的每秒最大IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| average_peak_iops   | integer                  | 语句在数据库节点上的每秒平均IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| iops_skew_percent   | integer                  | 语句在数据库节点间的IO倾斜率。                               |
| warning             | text                     | 主要显示如下几类告警信息：Spill file size large than 256MB。Broadcast size large than 100MB。Early spill。Spill times is greater than 3。Spill on memory adaptive。Hash table conflict。 |
| queryid             | bigint                   | 语句执行使用的内部query id。                                 |
| query               | text                     | 正在执行的语句。                                             |
| query_plan          | text                     | 语句的执行计划。                                             |
| node_group          | text                     | 语句所属用户对应的逻辑openGauss。                            |
| top_cpu_dn          | text                     | cpu使用量topN信息。                                          |
| top_mem_dn          | text                     | 内存使用量topN信息。                                         |



##### STATEMENT_RESPONSETIME_PERCENTILE

获取openGaussSQL响应时间P80，P95分布信息。

| **名称** | **类型** | **描述**                                    |
| :------- | :------- | :------------------------------------------ |
| p80      | bigint   | openGauss80%的SQL的响应时间（单位：微秒）。 |
| p95      | bigint   | openGauss95%的SQL的响应时间（单位：微秒）。 |



##### STATEMENT_COMPLEX_RUNTIME

显示当前用户在数据库主节点上正在执行的作业的负载管理记录。

| 名称                | 类型                     | 描述                                                         |
| :------------------ | :----------------------- | :----------------------------------------------------------- |
| datid               | oid                      | 连接后端的数据OID。                                          |
| dbname              | name                     | 连接后端的数据库名称。                                       |
| schemaname          | text                     | 模式的名称。                                                 |
| nodename            | text                     | 数据库进程名称。                                             |
| username            | name                     | 连接到后端的用户名。                                         |
| application_name    | text                     | 连接到后端的应用名。                                         |
| client_addr         | inet                     | 连接到后端的客户端的IP地址。 如果此字段是null，它表明通过服务器机器上UNIX套接字连接客户端或者这是内部进程，如autovacuum。 |
| client_hostname     | text                     | 客户端的主机名，这个字段是通过client_addr的反向DNS查找得到。这个字段只有在启动log_hostname且使用IP连接时才非空。 |
| client_port         | integer                  | 客户端用于与后端通讯的TCP端口号，如果使用Unix套接字，则为-1。 |
| query_band          | text                     | 用于标示作业类型，可通过GUC参数query_band进行设置，默认为空字符串。 |
| pid                 | bigint                   | 后端线程ID。                                                 |
| block_time          | bigint                   | 语句执行前的阻塞时间，单位ms。                               |
| start_time          | timestamp with time zone | 语句执行的开始时间。                                         |
| duration            | bigint                   | 语句已经执行的时间，单位ms。                                 |
| estimate_total_time | bigint                   | 语句执行预估总时间，单位ms。                                 |
| estimate_left_time  | bigint                   | 语句执行预估剩余时间，单位ms。                               |
| enqueue             | text                     | 工作负载管理资源状态。                                       |
| resource_pool       | name                     | 用户使用的资源池。                                           |
| control_group       | text                     | 语句所使用的Cgroup。                                         |
| estimate_memory     | integer                  | 语句预估使用内存，单位MB。                                   |
| min_peak_memory     | integer                  | 语句在数据库节点上的最小内存峰值，单位MB。                   |
| max_peak_memory     | integer                  | 语句在数据库节点上的最大内存峰值，单位MB。                   |
| average_peak_memory | integer                  | 语句执行过程中的内存使用平均值，单位MB。                     |
| memory_skew_percent | integer                  | 语句在数据库节点间的内存使用倾斜率。                         |
| spill_info          | text                     | 语句在数据库节点上的下盘信息：None：数据库节点均未下盘。All：数据库节点均下盘。[a:b]：数量为b个数据库节点中有a个数据库节点下盘。 |
| min_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最小数据量，单位MB，默认为0。  |
| max_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最大数据量，单位MB，默认为0。  |
| average_spill_size  | integer                  | 若发生下盘，数据库节点上下盘的平均数据量，单位MB，默认为0。  |
| spill_skew_percent  | integer                  | 若发生下盘，数据库节点间下盘倾斜率。                         |
| min_dn_time         | bigint                   | 语句在数据库节点上的最小执行时间，单位ms。                   |
| max_dn_time         | bigint                   | 语句在数据库节点上的最大执行时间，单位ms。                   |
| average_dn_time     | bigint                   | 语句在数据库节点上的平均执行时间，单位ms。                   |
| dntime_skew_percent | integer                  | 语句在数据库节点的执行时间倾斜率。                           |
| min_cpu_time        | bigint                   | 语句在数据库节点上的最小CPU时间，单位ms。                    |
| max_cpu_time        | bigint                   | 语句在数据库节点上的最大CPU时间，单位ms。                    |
| total_cpu_time      | bigint                   | 语句在数据库节点上的CPU总时间，单位ms。                      |
| cpu_skew_percent    | integer                  | 语句在数据库节点间的CPU时间倾斜率。                          |
| min_peak_iops       | integer                  | 语句在数据库节点上的每秒最小IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| max_peak_iops       | integer                  | 语句在数据库节点上的每秒最大IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| average_peak_iops   | integer                  | 语句在数据库节点上的每秒平均IO峰值（列存单位是次/s，行存单位是万次/s）。 |
| iops_skew_percent   | integer                  | 语句在数据库节点间的IO倾斜率。                               |
| warning             | text                     | 主要显示如下几类告警信息：Spill file size large than 256MB。Broadcast size large than 100MB。Early spill。Spill times is greater than 3。Spill on memory adaptive。Hash table conflict。 |
| queryid             | bigint                   | 语句执行使用的内部query id。                                 |
| query               | text                     | 正在执行的语句。                                             |
| query_plan          | text                     | 语句的执行计划。                                             |
| node_group          | text                     | 语句所属用户对应的逻辑openGauss。                            |
| top_cpu_dn          | text                     | cpu使用量topN信息。                                          |
| top_mem_dn          | text                     | 内存使用量topN信息。                                         |



##### STATEMENT_COMPLEX_HISTORY_TABLE

显示数据库主节点执行作业结束后的负载管理记录。此数据是从内核中转储到系统表中的数据。

字段同上。



##### STATEMENT_COMPLEX_HISTORY

显示在数据库主节点上执行作业结束后的负载管理记录

| 名称        | 类型     | 描述                                                         |
| :---------- | :------- | :----------------------------------------------------------- |
| sessid      | text     | 线程启动时间+线程标识（字符串信息为timestamp.threadid）。    |
| sesstype    | text     | 线程名称。                                                   |
| contextname | text     | 内存上下文名称。                                             |
| level       | smallint | 当前上下文在整体内存上下文中的层级。                         |
| parent      | text     | 父内存上下文名称。                                           |
| totalsize   | bigint   | 当前内存上下文的内存总数，单位Byte。                         |
| freesize    | bigint   | 当前内存上下文中已释放的内存总数，单位Byte。                 |
| usedsize    | bigint   | 当前内存上下文中已使用的内存总数，单位Byte；“TempSmallContextGroup”内存上下文中该字段含义为统计计数。 |





##### STATEMENT_WLMSTAT_COMPLEX_RUNTIME

显示和当前用户执行作业正在运行时的负载管理相关信息。

| 名称             | 类型    | 描述                                                         |
| :--------------- | :------ | :----------------------------------------------------------- |
| datid            | oid     | 连接后端的数据库OID。                                        |
| datname          | name    | 连接后端的数据库名称。                                       |
| threadid         | bigint  | 后端线程ID。                                                 |
| processid        | integer | 后端线程的pid。                                              |
| usesysid         | oid     | 登录后端的用户OID。                                          |
| appname          | text    | 连接到后端的应用名。                                         |
| usename          | name    | 登录到该后端的用户名。                                       |
| priority         | bigint  | 语句所在Cgroups的优先级。                                    |
| attribute        | text    | 语句的属性：Ordinary：语句发送到数据库后被解析前的默认属性。Simple：简单语句。Complicated：复杂语句。Internal：数据库内部语句。 |
| block_time       | bigint  | 语句当前为止的pending的时间，单位s。                         |
| elapsed_time     | bigint  | 语句当前为止的实际执行时间，单位s。                          |
| total_cpu_time   | bigint  | 语句在上一时间周期内的数据库节点上CPU使用的总时间，单位s。   |
| cpu_skew_percent | integer | 语句在上一时间周期内的数据库节点上CPU使用的倾斜率。          |
| statement_mem    | integer | 语句执行使用的statement_mem，预留字段。                      |
| active_points    | integer | 语句占用的资源池并发点数。                                   |
| dop_value        | integer | 语句的从资源池中获取的dop值。                                |
| control_group    | text    | 该字段不支持。                                               |
| status           | text    | 该字段不支持。                                               |
| enqueue          | text    | 语句当前的排队情况，包括：Global：在全局队列中排队。Respool：在资源池队列中排队。CentralQueue：在中心协调节点（CCN）中排队。Transaction：语句处于一个事务块中。StoredProc：句处于一个存储过程中。None：未在排队。Forced None：事务块语句或存储过程语句由于超出设定的等待时间而强制执行。 |
| resource_pool    | name    | 语句当前所在的资源池。                                       |
| query            | text    | 该后端的最新查询。如果state状态是active（活的），此字段显示当前正在执行的查询。所有其他情况表示上一个查询。 |
| is_plana         | boolean | 逻辑openGauss模式下，语句当前是否占用其他逻辑openGauss的资源执行。该值默认为f（否）。 |
| node_group       | text    | 语句所属用户对应的逻辑openGauss。                            |



##### STATEMENT_HISTORY

获得当前节点的执行语句的信息。查询视图必须具有sysadmin权限或者monitor admin权限。只可在系统库中查询到结果，用户库中无法查询。

| 名称                 | 类型                     | 描述                                                         |
| :------------------- | :----------------------- | :----------------------------------------------------------- |
| dbname               | name                     | 数据库名称。                                                 |
| schemaname           | name                     | schema名称。                                                 |
| origin_node          | integer                  | 节点名称。                                                   |
| user_name            | name                     | 用户名。                                                     |
| application_name     | text                     | 用户发起的请求的应用程序名称。                               |
| client_addr          | text                     | 用户发起的请求的客户端地址。                                 |
| client_port          | integer                  | 用户发起的请求的客户端端口。                                 |
| unique_query_id      | bigint                   | 归一化SQL ID。                                               |
| debug_query_id       | bigint                   | 唯一SQL ID。                                                 |
| query                | text                     | 归一化SQL。                                                  |
| start_time           | timestamp with time zone | 语句启动的时间。                                             |
| finish_time          | timestamp with time zone | 语句结束的时间。                                             |
| slow_sql_threshold   | bigint                   | 语句执行时慢SQL的标准。                                      |
| transaction_id       | bigint                   | 事务ID。                                                     |
| thread_id            | bigint                   | 执行线程ID。                                                 |
| session_id           | bigint                   | 用户session id。                                             |
| n_soft_parse         | bigint                   | 软解析次数，n_soft_parse + n_hard_parse可能大于n_calls，因为子查询未计入n_calls。 |
| n_hard_parse         | bigint                   | 硬解析次数，n_soft_parse + n_hard_parse可能大于n_calls，因为子查询未计入n_calls。 |
| query_plan           | text                     | 语句执行计划。                                               |
| n_returned_rows      | bigint                   | SELECT返回的结果集行数。                                     |
| n_tuples_fetched     | bigint                   | 随机扫描行。                                                 |
| n_tuples_returned    | bigint                   | 顺序扫描行。                                                 |
| n_tuples_inserted    | bigint                   | 插入行。                                                     |
| n_tuples_updated     | bigint                   | 更新行。                                                     |
| n_tuples_deleted     | bigint                   | 删除行。                                                     |
| n_blocks_fetched     | bigint                   | buffer的块访问次数。                                         |
| n_blocks_hit         | bigint                   | buffer的块命中次数。                                         |
| db_time              | bigint                   | 有效的DB时间花费，多线程将累加（单位：微秒）。               |
| cpu_time             | bigint                   | CPU时间（单位：微秒）。                                      |
| execution_time       | bigint                   | 执行器内执行时间（单位：微秒）。                             |
| parse_time           | bigint                   | SQL解析时间（单位：微秒）。                                  |
| plan_time            | bigint                   | SQL生成计划时间（单位：微秒）。                              |
| rewrite_time         | bigint                   | SQL重写时间（单位：微秒）。                                  |
| pl_execution_time    | bigint                   | plpgsql上的执行时间（单位：微秒）。                          |
| pl_compilation_time  | bigint                   | plpgsql上的编译时间（单位：微秒）。                          |
| data_io_time         | bigint                   | IO上的时间花费（单位：微秒）。                               |
| net_send_info        | text                     | 通过物理连接发送消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| net_recv_info        | text                     | 通过物理连接接收消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| net_stream_send_info | text                     | 通过逻辑连接发送消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| net_stream_recv_info | text                     | 通过逻辑连接接收消息的网络状态，包含时间（微秒）、调用次数、吞吐量（字节）。通过该字段可以分析SQL在分布式系统下的网络开销，单机模式下不支持该字段。例如：{"time":xxx, "n_calls":xxx, "size":xxx}。 |
| lock_count           | bigint                   | 加锁次数。                                                   |
| lock_time            | bigint                   | 加锁耗时。                                                   |
| lock_wait_count      | bigint                   | 加锁等待次数。                                               |
| lock_wait_time       | bigint                   | 加锁等待耗时。                                               |
| lock_max_count       | bigint                   | 最大持锁数量。                                               |
| lwlock_count         | bigint                   | 轻量级加锁次数（预留）。                                     |
| lwlock_wait_count    | bigint                   | 轻量级等锁次数。                                             |
| lwlock_time          | bigint                   | 轻量级加锁时间（预留）。                                     |
| lwlock_wait_time     | bigint                   | 轻量级加锁时间。                                             |
| details              | bytea                    | 语句锁事件的列表，该列表按时间书序记录事件，记录的数量受参数track_stmt_details_size的影响。事件包括：加锁开始加锁结束等锁开始等锁结束放锁开始放锁结束轻量级等锁开始轻量级等锁结束 |
| is_slow_sql          | boolean                  | 该SQL是否为slow SQL                                          |
| trace_id             | text                     | 驱动传入的trace id，与应用的一次请求相关联。                 |

对应系统表statement_history，主要目的是记录数据库运行中产生的sql与其运行信息，保证即便数据库重启，SQL信息也依然可以查询到。

一般使用形式:

```makefile
openGauss=# select * from DBE_PERF.statement_history;
```

主要受到以下参数控制：

- log_duration：是否记录慢查询。
- log_min_duration_statement：单位毫秒，标记SQL的慢查询时间，0记录所有SQL，-1则不记录任何信息。
- track_stmt_stat_level：默认为`OFF,L0`。参数第一部分为非OFF情况下，会记录所有SQL，第一部分为OFF，第二部分为非OFF情况下，仅记录慢SQL。
- track_stmt_parameter：追踪语句更详细内容。

此处代码判断逻辑为（以下各个条件为或判定，满足其一即可）：

1. 打开了动态语句追踪功能：采用dynamic_func_control追踪STMT。
2. track_stmt_stat_level追踪第一个level为L0或者更高。
3. track_stmt_stat_level追踪第二个level为L0或者更高，且语句运行时间大于log_min_duration_statement设定值，且log_min_duration_statement大于等于0，并且没有打开track_stmt_parameter。
4. 打开track_stmt_parameter，并且时间模式第一个值（消耗的DBTIME）大于0。



#### 10. Cache/IO

##### STATIO_USER_TABLES

显示命名空间中所有用户关系表的IO状态信息。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| relid           | oid      | 表OID。                                       |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | bigint   | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | bigint   | 该表缓存命中数。                              |
| idx_blks_read   | bigint   | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | bigint   | 表中所有索引命中缓存数。                      |
| toast_blks_read | bigint   | 该表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | bigint   | 该表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | bigint   | 该表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | bigint   | 该表的TOAST表索引命中缓冲区数（如果存在）。   |



##### SUMMARY_STATIO_USER_TABLES

SUMMARY_STATIO_USER_TABLES视图显示openGauss内汇聚的命名空间中所有用户关系表的IO状态信息。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | numeric  | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | numeric  | 此表缓存命中数。                              |
| idx_blks_read   | numeric  | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | numeric  | 表中所有索引命中缓存数。                      |
| toast_blks_read | numeric  | 此表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | numeric  | 此表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | numeric  | 此表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | numeric  | 此表的TOAST表索引命中缓冲区数（如果存在）。   |



##### GLOBAL_STATIO_USER_TABLES

GLOBAL_STATIO_USER_TABLES视图显示各节点的命名空间中所有用户关系表的IO状态信息。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| node_name       | name     | 节点名称。                                    |
| relid           | oid      | 表OID。                                       |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | bigint   | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | bigint   | 此表缓存命中数。                              |
| idx_blks_read   | bigint   | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | bigint   | 表中所有索引命中缓存数。                      |
| toast_blks_read | bigint   | 此表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | bigint   | 此表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | bigint   | 此表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | bigint   | 此表的TOAST表索引命中缓冲区数（如果存在）。   |



##### STATIO_USER_INDEXES

显示当前节点命名空间中所有用户关系表索引的IO状态信息。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| relid         | oid      | 索引的表的OID。          |
| indexrelid    | oid      | 该索引的OID。            |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | bigint   | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | bigint   | 索引命中缓存数。         |



##### SUMMARY_STATIO_USER_INDEXES

显示openGauss内汇聚的命名空间中所有用户关系表索引的IO状态信息。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | numeric  | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | numeric  | 索引命中缓存数。         |



##### GLOBAL_STATIO_USER_INDEXES

显示各节点的命名空间中所有用户关系表索引的IO状态信息。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| node_name     | name     | 数据库进程名称。         |
| relid         | oid      | 索引的表的OID。          |
| indexrelid    | oid      | 该索引的OID。            |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | numeric  | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | numeric  | 索引命中缓存数。         |



##### STATIO_USER_SEQUENCES

显示当前节点的命名空间中所有用户关系表类型为序列的IO状态信息。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| relid      | oid      | 序列OID。                |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | bigint   | 从序列中读取的磁盘块数。 |
| blks_hit   | bigint   | 序列中缓存命中数。       |



##### SUMMARY_STATIO_USER_SEQUENCES

显示openGauss内汇聚的命名空间中所有用户关系表类型为序列的IO状态信息。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | numeric  | 从序列中读取的磁盘块数。 |
| blks_hit   | numeric  | 序列中缓存命中数。       |



##### GLOBAL_STATIO_USER_SEQUENCES

显示各节点的命名空间中所有用户关系表类型为序列的IO状态信息。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| node_name  | name     | 数据库进程名称。         |
| relid      | oid      | 序列OID。                |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | bigint   | 从序列中读取的磁盘块数。 |
| blks_hit   | bigint   | 序列中缓存命中数。       |



##### STATIO_SYS_TABLES

显示命名空间中所有系统表的IO状态信息。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| relid           | oid      | 表OID。                                       |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | bigint   | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | bigint   | 该表缓存命中数。                              |
| idx_blks_read   | bigint   | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | bigint   | 表中所有索引命中缓存数。                      |
| toast_blks_read | bigint   | 该表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | bigint   | 该表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | bigint   | 该表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | bigint   | 该表的TOAST表索引命中缓冲区数（如果存在）。   |



##### SUMMARY_STATIO_SYS_TABLES

显示openGauss内汇聚的命名空间中所有系统表的IO状态信息。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | numeric  | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | numeric  | 此表缓存命中数。                              |
| idx_blks_read   | numeric  | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | numeric  | 表中所有索引命中缓存数。                      |
| toast_blks_read | numeric  | 此表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | numeric  | 此表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | numeric  | 此表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | numeric  | 此表的TOAST表索引命中缓冲区数（如果存在）。   |



##### GLOBAL_STATIO_SYS_TABLES

显示各节点的命名空间中所有系统表的IO状态信息。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| node_name       | name     | 数据库进程名称。                              |
| relid           | oid      | 表OID。                                       |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | bigint   | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | bigint   | 此表缓存命中数。                              |
| idx_blks_read   | bigint   | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | bigint   | 表中所有索引命中缓存数。                      |
| toast_blks_read | bigint   | 此表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | bigint   | 此表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | bigint   | 此表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | bigint   | 此表的TOAST表索引命中缓冲区数（如果存在）。   |



##### STATIO_SYS_INDEXES

显示命名空间中所有系统表索引的IO状态信息。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| relid         | oid      | 索引的表的OID。          |
| indexrelid    | oid      | 该索引的OID。            |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | bigint   | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | bigint   | 索引命中缓存数。         |



##### SUMMARY_STATIO_SYS_INDEXES

显示openGauss内汇聚的命名空间中所有系统表索引的IO状态信息。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | numeric  | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | numeric  | 索引命中缓存数。         |



##### GLOBAL_STATIO_SYS_INDEXES

显示各节点的命名空间中所有系统表索引的IO状态信息。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| node_name     | name     | 数据库进程名称。         |
| relid         | oid      | 索引的表的OID。          |
| indexrelid    | oid      | 该索引的OID。            |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | numeric  | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | numeric  | 索引命中缓存数。         |



##### STATIO_SYS_SEQUENCES

显示命名空间中所有系统表为序列的IO状态信息。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| relid      | oid      | 序列OID。                |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | bigint   | 从序列中读取的磁盘块数。 |
| blks_hit   | bigint   | 序列中缓存命中数。       |



##### SUMMARY_STATIO_SYS_SEQUENCES

显示openGauss内汇聚的命名空间中所有系统表为序列的IO状态信息。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | numeric  | 从序列中读取的磁盘块数。 |
| blks_hit   | numeric  | 序列中缓存命中数。       |



##### GLOBAL_STATIO_SYS_SEQUENCES

显示各节点的命名空间中所有系统表为序列的IO状态信息。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| node_name  | name     | 数据库进程名称。         |
| relid      | oid      | 序列OID。                |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | bigint   | 从序列中读取的磁盘块数。 |
| blks_hit   | bigint   | 序列中缓存命中数。       |



##### STATIO_ALL_TABLES

包含数据库中每个表（包括TOAST表）的一行，显示出特定表I/O的统计。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| relid           | oid      | 表OID。                                       |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | bigint   | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | bigint   | 该表缓存命中数。                              |
| idx_blks_read   | bigint   | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | bigint   | 表中所有索引命中缓存数。                      |
| toast_blks_read | bigint   | 该表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | bigint   | 该表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | bigint   | 该表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | bigint   | 该表的TOAST表索引命中缓冲区数（如果存在）。   |



##### SUMMARY_STATIO_ALL_TABLES

包含openGauss内汇聚的数据库中每个表（包括TOAST表）的I/O的统计。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | numeric  | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | numeric  | 此表缓存命中数。                              |
| idx_blks_read   | numeric  | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | numeric  | 表中所有索引命中缓存数。                      |
| toast_blks_read | numeric  | 此表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | numeric  | 此表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | numeric  | 此表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | numeric  | 此表的TOAST表索引命中缓冲区数（如果存在）。   |



##### GLOBAL_STATIO_ALL_TABLES

包含各节点的数据库中每个表（包括TOAST表）的I/O的统计。

| **名称**        | **类型** | **描述**                                      |
| :-------------- | :------- | :-------------------------------------------- |
| node_name       | name     | 数据库进程名称。                              |
| relid           | oid      | 表OID。                                       |
| schemaname      | name     | 该表模式名。                                  |
| relname         | name     | 表名。                                        |
| heap_blks_read  | bigint   | 从该表中读取的磁盘块数。                      |
| heap_blks_hit   | bigint   | 此表缓存命中数。                              |
| idx_blks_read   | bigint   | 从表中所有索引读取的磁盘块数。                |
| idx_blks_hit    | bigint   | 表中所有索引命中缓存数。                      |
| toast_blks_read | bigint   | 此表的TOAST表读取的磁盘块数（如果存在）。     |
| toast_blks_hit  | bigint   | 此表的TOAST表命中缓冲区数（如果存在）。       |
| tidx_blks_read  | bigint   | 此表的TOAST表索引读取的磁盘块数（如果存在）。 |
| tidx_blks_hit   | bigint   | 此表的TOAST表索引命中缓冲区数（如果存在）。   |



##### STATIO_ALL_INDEXES

包含数据库中的每个索引行，显示特定索引的I/O的统计。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| relid         | oid      | 索引的表的OID。          |
| indexrelid    | oid      | 该索引的OID。            |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | bigint   | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | bigint   | 索引命中缓存数。         |



##### SUMMARY_STATIO_ALL_INDEXES

包含openGauss内汇聚的数据库中的每个索引行， 显示特定索引的I/O的统计。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | numeric  | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | numeric  | 索引命中缓存数。         |



##### GLOBAL_STATIO_ALL_INDEXES

包含各节点的数据库中的每个索引行，显示特定索引的I/O的统计。

| **名称**      | **类型** | **描述**                 |
| :------------ | :------- | :----------------------- |
| node_name     | name     | 数据库进程名称。         |
| relid         | oid      | 索引的表的OID。          |
| indexrelid    | oid      | 该索引的OID。            |
| schemaname    | name     | 该索引的模式名。         |
| relname       | name     | 该索引的表名。           |
| indexrelname  | name     | 索引名称。               |
| idx_blks_read | numeric  | 从索引中读取的磁盘块数。 |
| idx_blks_hit  | numeric  | 索引命中缓存数。         |



##### STATIO_ALL_SEQUENCES

包含数据库中每个序列的每一行，显示特定序列关于I/O的统计。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| relid      | oid      | 序列OID。                |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | bigint   | 从序列中读取的磁盘块数。 |
| blks_hit   | bigint   | 序列中缓存命中数。       |



##### SUMMARY_STATIO_ALL_SEQUENCES

包含openGauss内汇聚的数据库中每个序列的每一行,显示特定序列关于I/O的统计。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | numeric  | 从序列中读取的磁盘块数。 |
| blks_hit   | numeric  | 序列中缓存命中数。       |



##### GLOBAL_STATIO_ALL_SEQUENCES

含各节点的数据库中每个序列的每一行，显示特定序列关于I/O的统计。

| **名称**   | **类型** | **描述**                 |
| :--------- | :------- | :----------------------- |
| node_name  | name     | 数据库进程名称。         |
| relid      | oid      | 序列OID。                |
| schemaname | name     | 序列中模式名。           |
| relname    | name     | 序列名。                 |
| blks_read  | bigint   | 从序列中读取的磁盘块数。 |
| blks_hit   | bigint   | 序列中缓存命中数。       |



##### GLOBAL_STAT_DB_CU

用于查询openGauss，每个数据库的CU命中情况。可以通过pg_stat_reset()进行清零。

| **名称**      | **类型** | **描述**         |
| :------------ | :------- | :--------------- |
| node_name1    | text     | 数据库进程名称。 |
| db_name       | text     | 数据库名。       |
| mem_hit       | bigint   | 内存命中次数。   |
| hdd_sync_read | bigint   | 硬盘同步读次数。 |
| hdd_asyn_read | bigint   | 硬盘异步读次数。 |



##### GLOBAL_STAT_SESSION_CU

用于查询openGauss各个节点，当前运行session的CU命中情况。session退出相应的统计数据会清零。openGauss重启后，统计数据也会清零。

| **名称**      | **类型** | **描述**         |
| :------------ | :------- | :--------------- |
| mem_hit       | integer  | 内存命中次数。   |
| hdd_sync_read | integer  | 硬盘同步读次数。 |
| hdd_asyn_read | integer  | 硬盘异步读次数。 |



#### 11. Utility

##### REPLICATION_STAT

描述日志同步状态信息，如发起端发送日志位置、收端接收日志位置等。

| **名称**                 | **类型**                 | **描述**                                   |
| :----------------------- | :----------------------- | :----------------------------------------- |
| pid                      | bigint                   | 线程的PID。                                |
| usesysid                 | oid                      | 用户系统ID。                               |
| usename                  | name                     | 用户名。                                   |
| application_name         | text                     | 程序名称。                                 |
| client_addr              | inet                     | 客户端地址。                               |
| client_hostname          | text                     | 客户端名。                                 |
| client_port              | integer                  | 客户端端口。                               |
| backend_start            | timestamp with time zone | 程序启动时间。                             |
| state                    | text                     | 日志复制的状态：追赶状态。一致的流状态。   |
| sender_sent_location     | text                     | 发送端发送日志位置。                       |
| receiver_write_location  | text                     | 接收端write日志位置。                      |
| receiver_flush_location  | text                     | 接收端flush日志位置。                      |
| receiver_replay_location | text                     | 接收端replay日志位置。                     |
| sync_priority            | integer                  | 同步复制的优先级（0表示异步）。            |
| sync_state               | text                     | 同步状态：异步复制。同步复制。潜在同步者。 |



##### GLOBAL_REPLICATION_STAT

获得各节点描述日志同步状态信息，如发起端发送日志位置、收端接收日志位置等。

| **名称**                 | **类型**                 | **描述**                                   |
| :----------------------- | :----------------------- | :----------------------------------------- |
| node_name                | name                     | 数据库进程名称。                           |
| pid                      | bigint                   | 线程的PID。                                |
| usesysid                 | oid                      | 用户系统ID。                               |
| usename                  | name                     | 用户名。                                   |
| application_name         | text                     | 程序名称。                                 |
| client_addr              | inet                     | 客户端地址。                               |
| client_hostname          | text                     | 客户端名。                                 |
| client_port              | integer                  | 客户端端口。                               |
| backend_start            | timestamp with time zone | 程序启动时间。                             |
| state                    | text                     | 日志复制的状态：追赶状态。一致的流状态。   |
| sender_sent_location     | text                     | 发送端发送日志位置。                       |
| receiver_write_location  | text                     | 接收端write日志位置。                      |
| receiver_flush_location  | text                     | 接收端flush日志位置。                      |
| receiver_replay_location | text                     | 接收端replay日志位置。                     |
| sync_priority            | integer                  | 同步复制的优先级（0表示异步）。            |
| sync_state               | text                     | 同步状态：异步复制。同步复制。潜在同步者。 |



##### REPLICATION_SLOTS

查看复制节点的信息。

| **名称**      | **类型** | **描述**                           |
| :------------ | :------- | :--------------------------------- |
| slot_name     | text     | 复制节点的名称。                   |
| plugin        | text     | 插件名称。                         |
| slot_type     | text     | 复制节点的类型。                   |
| datoid        | oid      | 复制节点的数据库OID。              |
| database      | name     | 复制节点的数据库名称。             |
| active        | boolean  | 复制节点是否为激活状态。           |
| xmin          | xid      | 复制节点事务标识。                 |
| catalog_xmin  | xid      | 逻辑复制槽对应的最早解码事务标识。 |
| restart_lsn   | text     | 复制节点的Xlog文件信息。           |
| dummy_standby | boolean  | 复制节点是否为假备。               |



##### GLOBAL_REPLICATION_SLOTS

查看openGauss各节点的复制节点的信息。

| **名称**      | **类型** | **描述**                          |
| :------------ | :------- | :-------------------------------- |
| node_name     | name     | 数据库进程名称。                  |
| slot_name     | text     | 复制节点的名称。                  |
| plugin        | text     | 插件名称。                        |
| slot_type     | text     | 复制节点的类型。                  |
| datoid        | oid      | 复制节点的数据库OID。             |
| database      | name     | 复制节点的数据库名称。            |
| active        | boolean  | 复制节点是否为激活状态。          |
| x_min         | xid      | 复制节点事务标识。                |
| catalog_xmin  | xid      | 逻辑复制槽对应的最早解码事务标识. |
| restart_lsn   | text     | 复制节点的Xlog文件信息。          |
| dummy_standby | boolean  | 复制节点是否为假备。              |



##### BGWRITER_STAT

显示关于后端写进程活动的统计信息。

| **名称**              | **类型**                 | **描述**                                                     |
| :-------------------- | :----------------------- | :----------------------------------------------------------- |
| checkpoints_timed     | bigint                   | 执行的定期检查点数。                                         |
| checkpoints_req       | bigint                   | 执行的需求检查点数。                                         |
| checkpoint_write_time | double precision         | 花费在检查点处理部分的时间总量，其中文件被写入到磁盘，以毫秒为单位。 |
| checkpoint_sync_time  | double precision         | 花费在检查点处理部分的时间总量，其中文件被同步到磁盘，以毫秒为单位。 |
| buffers_checkpoint    | bigint                   | 检查点写缓冲区数量。                                         |
| buffers_clean         | bigint                   | 后端写进程写缓冲区数量。                                     |
| maxwritten_clean      | bigint                   | 后端写进程停止清理扫描时间数，因为它写了太多缓冲区。         |
| buffers_backend       | bigint                   | 通过后端直接写缓冲区数。                                     |
| buffers_backend_fsync | bigint                   | 后端不得不执行自己的fsync调用的时间数（通常后端写进程处理这些即使后端确实自己写）。 |
| buffers_alloc         | bigint                   | 分配的缓冲区数量。                                           |
| stats_reset           | timestamp with time zone | 这些统计被重置的时间。                                       |



##### GLOBAL_BGWRITER_STAT

显示各节点关于后端写进程活动的统计信息。

| **名称**              | **类型**                 | **描述**                                                     |
| :-------------------- | :----------------------- | :----------------------------------------------------------- |
| node_name             | name                     | 数据库进程名称。                                             |
| checkpoints_timed     | bigint                   | 执行的定期检查点数。                                         |
| checkpoints_req       | bigint                   | 执行的需求检查点数。                                         |
| checkpoint_write_time | double precision         | 花费在检查点处理部分的时间总量，其中文件被写入到磁盘，以毫秒为单位。 |
| checkpoint_sync_time  | double precision         | 花费在检查点处理部分的时间总量，其中文件被同步到磁盘，以毫秒为单位。 |
| buffers_checkpoint    | bigint                   | 检查点写缓冲区数量。                                         |
| buffers_clean         | bigint                   | 后端写进程写缓冲区数量。                                     |
| maxwritten_clean      | bigint                   | 后端写进程停止清理扫描时间数，因为它写了太多缓冲区。         |
| buffers_backend       | bigint                   | 通过后端直接写缓冲区数。                                     |
| buffers_backend_fsync | bigint                   | 后端不得不执行自己的fsync调用的时间数（通常后端写进程处理这些即使后端确实自己写）。 |
| buffers_alloc         | bigint                   | 分配的缓冲区数量。                                           |
| stats_reset           | timestamp with time zone | 这些统计被重置的时间。                                       |



##### GLOBAL_CKPT_STATUS

显示openGauss所有实例的检查点信息和各类日志刷页情况。

| 名称                     | 类型   | 描述                                  |
| :----------------------- | :----- | :------------------------------------ |
| node_name                | text   | 数据库进程名称。                      |
| ckpt_redo_point          | test   | 当前实例的检查点。                    |
| ckpt_clog_flush_num      | bigint | 从启动到当前时间clog刷盘页面数。      |
| ckpt_csnlog_flush_num    | bigint | 从启动到当前时间csnlog刷盘页面数。    |
| ckpt_multixact_flush_num | bigint | 从启动到当前时间multixact刷盘页面数。 |
| ckpt_predicate_flush_num | bigint | 从启动到当前时间predicate刷盘页面数。 |
| ckpt_twophase_flush_num  | bigint | 从启动到当前时间twophase刷盘页面数。  |



##### GLOBAL_DOUBLE_WRITE_STATUS

显示openGauss所有实例的双写文件的情况。它是由每个节点的local_double_write_stat视图组成，属性完全一致。

| 名称                  | 类型   | 描述                                                         |
| :-------------------- | :----- | :----------------------------------------------------------- |
| node_name             | text   | 节点名称。                                                   |
| curr_dwn              | bigint | 当前双写文件的序列号。                                       |
| curr_start_page       | bigint | 当前双写文件恢复起始页面。                                   |
| file_trunc_num        | bigint | 当前双写文件复用的次数。                                     |
| file_reset_num        | bigint | 当前双写文件写满后发生重置的次数。                           |
| total_writes          | bigint | 当前双写文件总的I/O次数。                                    |
| low_threshold_writes  | bigint | 低效率写双写文件的I/O次数（一次I/O刷页数量少于16页面）。     |
| high_threshold_writes | bigint | 高效率写双写文件的I/O次数（一次I/O刷页数量多于一批，421个页面）。 |
| total_pages           | bigint | 当前刷页到双写文件区的总的页面个数。                         |
| low_threshold_pages   | bigint | 低效率刷页的页面个数。                                       |
| high_threshold_pages  | bigint | 高效率刷页的页面个数。                                       |
| file_id               | bigint | 当前双写文件的id号。                                         |



##### GLOBAL_PAGEWRITER_STATUS

显示openGauss实例的刷页信息和检查点信息。

| 名称                        | 类型    | 描述                                         |
| :-------------------------- | :------ | :------------------------------------------- |
| node_name                   | text    | 数据库进程名称。                             |
| pgwr_actual_flush_total_num | bigint  | 从启动到当前时间总计刷脏页数量。             |
| pgwr_last_flush_num         | integer | 上一批刷脏页数量。                           |
| remain_dirty_page_num       | bigint  | 当前预计还剩余多少脏页。                     |
| queue_head_page_rec_lsn     | text    | 当前实例的脏页队列第一个脏页的recovery_lsn。 |
| queue_rec_lsn               | text    | 当前实例的脏页队列的recovery_lsn。           |
| current_xlog_insert_lsn     | text    | 当前实例XLog写入的位置。                     |
| ckpt_redo_point             | text    | 当前实例的检查点。                           |



##### GLOBAL_RECORD_RESET_TIME

重置（重启、主备倒换、数据库删除）汇聚openGauss统计信息时间。

| 名称       | 类型                     | 描述             |
| :--------- | :----------------------- | :--------------- |
| node_name  | text                     | 数据库进程名称。 |
| reset_time | timestamp with time zone | 重置时间点。     |



##### GLOBAL_REDO_STATUS

显示openGauss实例的日志回放情况。

| 名称                      | 类型   | 描述                                               |
| :------------------------ | :----- | :------------------------------------------------- |
| node_name                 | text   | 数据库进程名称。                                   |
| redo_start_ptr            | bigint | 当前实例日志回放的起始点。                         |
| redo_start_time           | bigint | 当前实例日志回放的起始UTC时间。                    |
| redo_done_time            | bigint | 当前实例日志回放的结束UTC时间。                    |
| curr_time                 | bigint | 当前实例的当前UTC时间。                            |
| min_recovery_point        | bigint | 当前实例日志的最小一致性点位置。                   |
| read_ptr                  | bigint | 当前实例日志的读取位置。                           |
| last_replayed_read_ptr    | bigint | 当前实例的日志回放位置。                           |
| recovery_done_ptr         | bigint | 当前实例启动完成时的回放位置。                     |
| read_xlog_io_counter      | bigint | 当前实例读取回放日志的io次数计数。                 |
| read_xlog_io_total_dur    | bigint | 当前实例读取回放日志的io总时延。                   |
| read_data_io_counter      | bigint | 当前实例回放过程中读取数据页面的io次数计数。       |
| read_data_io_total_dur    | bigint | 当前实例回放过程中读取数据页面的io总时延。         |
| write_data_io_counter     | bigint | 当前实例回放过程中写数据页面的io次数计数。         |
| write_data_io_total_dur   | bigint | 当前实例回放过程中写数据页面的io总时延。           |
| process_pending_counter   | bigint | 当前实例回放过程中日志分发线程的同步次数计数。     |
| process_pending_total_dur | bigint | 当前实例回放过程中日志分发线程的同步总时延。       |
| apply_counter             | bigint | 当前实例回放过程中回放线程的同步次数计数。         |
| apply_total_dur           | bigint | 当前实例回放过程中回放线程的同步总时延。           |
| speed                     | bigint | 当前实例日志回放速率。                             |
| local_max_ptr             | bigint | 当前实例启动成功后本地收到的回放日志的最大值。     |
| primary_flush_ptr         | bigint | 主机落盘日志的位置。                               |
| worker_info               | text   | 当前实例回放线程信息，若没有开并行回放则该值为空。 |



##### GLOBAL_RECOVERY_STATUS

显示关于主机和备机的日志流控信息。

| 名称               | 类型    | 描述                                             |
| :----------------- | :------ | :----------------------------------------------- |
| node_name          | text    | 主机进程名称，包含主机和备机。                   |
| standby_node_name  | text    | 备机进程名称。                                   |
| source_ip          | text    | 主机的IP地址。                                   |
| source_port        | integer | 主机的端口号。                                   |
| dest_ip            | text    | 备机的IP地址。                                   |
| dest_port          | integer | 备机的端口号。                                   |
| current_rto        | bigint  | 备机当前的日志流控时间，单位秒。                 |
| target_rto         | bigint  | 备机通过GUC参数设置的预期流控时间，单位秒。      |
| current_sleep_time | bigint  | 为了达到这个预期主机所需要的睡眠时间，单位微妙。 |



##### CLASS_VITAL_INFO

用于做WDR时校验相同的表或者索引的oid是否一致。

| 名称       | 类型   | 描述                                                         |
| :--------- | :----- | :----------------------------------------------------------- |
| relid      | oid    | 表的oid。                                                    |
| schemaname | name   | schema名称。                                                 |
| relname    | name   | 表名。                                                       |
| relkind    | "char" | 表示对象类型，取值范围如下：r：表示普通表。t：表示toast表。i：表示索引。 |



##### USER_LOGIN

记录用户登录和退出次数的相关信息。

| **名称**       | **类型** | **描述**                            |
| :------------- | :------- | :---------------------------------- |
| node_name      | text     | 数据库进程名称。                    |
| user_name      | text     | 用户名称。                          |
| user_id        | integer  | 用户oid（同pg_authid中的oid字段）。 |
| login_counter  | bigint   | 登录次数。                          |
| logout_counter | bigint   | 退出次数。                          |



##### SUMMARY_USER_LOGIN

记录数据库主节点上用户登录和退出次数的相关信息。

| **名称**       | **类型** | **描述**                            |
| :------------- | :------- | :---------------------------------- |
| node_name      | text     | 数据库进程名称。                    |
| user_name      | text     | 用户名称。                          |
| user_id        | integer  | 用户oid（同pg_authid中的oid字段）。 |
| login_counter  | bigint   | 登录次数。                          |
| logout_counter | bigint   | 退出次数。                          |



##### GLOBAL_GET_BGWRITER_STATUS

显示所有实例bgwriter线程刷页信息，候选buffer链中页面个数，buffer淘汰信息。

| 名称                        | 类型    | 描述                                         |
| :-------------------------- | :------ | :------------------------------------------- |
| node_name                   | text    | 实例名称。                                   |
| bgwr_actual_flush_total_num | bigint  | 从启动到当前时间bgwriter线程总计刷脏页数量。 |
| bgwr_last_flush_num         | integer | bgwriter线程上一批刷脏页数量。               |
| candidate_slots             | integer | 当前候选buffer链中页面个数。                 |
| get_buffer_from_list        | bigint  | buffer淘汰从候选buffer链中获取页面的次数。   |
| get_buffer_clock_sweep      | bigint  | buffer淘汰从原淘汰方案中获取页面的次数。     |



##### GLOBAL_SINGLE_FLUSH_DW_STATUS

显示数据库所有实例单页面淘汰双写文件信息。展示内容中，/前是第一个版本双写文件刷页情况，/后是第二个版本双写文件刷页情况。

| 名称            | 类型 | 描述                               |
| :-------------- | :--- | :--------------------------------- |
| node_name       | text | 实例名称。                         |
| curr_dwn        | text | 当前双写文件的序列号。             |
| curr_start_page | text | 当前双写文件start位置。            |
| total_writes    | text | 当前双写文件总计写数据页面个数。   |
| file_trunc_num  | text | 当前双写文件复用的次数。           |
| file_reset_num  | text | 当前双写文件写满后发生重置的次数。 |



##### GLOBAL_CANDIDATE_STATUS

显示整个数据库所有实例候选buffer个数，buffer淘汰信息。

| 名称                    | 类型    | 描述                                                         |
| :---------------------- | :------ | :----------------------------------------------------------- |
| node_name               | text    | 节点名称。                                                   |
| candidate_slots         | integer | 当前Normal Buffer Pool候选buffer链中页面个数。               |
| get_buf_from_list       | bigint  | Normal Buffer Pool，buffer淘汰从候选buffer链中获取页面的次数。 |
| get_buf_clock_sweep     | bigint  | Normal Buffer Pool，buffer淘汰从原淘汰方案中获取页面的次数。 |
| seg_candidate_slots     | integer | 当前Segment Buffer Pool候选buffer链中页面个数。              |
| seg_get_buf_from_list   | bigint  | Segment Buffer Pool，buffer淘汰从候选buffer链中获取页面的次数。 |
| seg_get_buf_clock_sweep | bigint  | Segment Buffer Pool，buffer淘汰从原淘汰方案中获取页面的次数。 |



#### 12. Lock

##### LOCKS

查看各打开事务所持有的锁信息。

| **名称**           | **类型** | **描述**                                                     |
| :----------------- | :------- | :----------------------------------------------------------- |
| locktype           | text     | 被锁定对象的类型：relation、extend、page、tuple、transactionid、virtualxid、object、userlock、advisory。 |
| database           | oid      | 被锁定对象所在数据库的OID：如果被锁定的对象是共享对象，则OID为0。如果是一个事务ID，则为NULL。 |
| relation           | oid      | 关系的OID，如果锁定的对象不是关系，也不是关系的一部分，则为NULL。 |
| page               | integer  | 关系内部的页面编号，如果对象不是关系页或者不是行页，则为NULL。 |
| tuple              | smallint | 页面里边的行编号，如果对象不是行，则为NULL。                 |
| bucket             | integer  | 哈希桶号。                                                   |
| virtualxid         | text     | 事务的虚拟ID，如果对象不是一个虚拟事务ID，则为NULL。         |
| transactionid      | xid      | 事务的ID，如果对象不是一个事务ID，则为NULL。                 |
| classid            | oid      | 包含该对象的系统表的OID，如果对象不是普通的数据库对象，则为NULL。 |
| objid              | oid      | 对象在其系统表内的OID，如果对象不是普通数据库对象，则为NULL。 |
| objsubid           | smallint | 对于表的一个字段，这是字段编号；对于其他对象类型，这个字段是0；如果这个对象不是普通数据库对象，则为NULL。 |
| virtualtransaction | text     | 持有此锁或者在等待此锁的事务的虚拟ID。                       |
| pid                | bigint   | 持有或者等待这个锁的服务器线程的逻辑ID。如果锁是被一个预备事务持有的，则为NULL。 |
| sessionid          | bigint   | 持有或者等待这个锁的会话ID。如果锁是被一个预备事务持有的，则为NULL。 |
| mode               | text     | 这个线程持有的或者是期望的锁模式。                           |
| granted            | boolean  | 如果锁是持有锁，则为TRUE。如果锁是等待锁，则为FALSE。        |
| fastpath           | boolean  | 如果通过fast-path获得锁，则为TRUE；如果通过主要的锁表获得，则为FALSE。 |
| locktag            | text     | 会话等待锁信息，可通过locktag_decode()函数解析。             |
| global_sessionid   | text     | 全局会话ID。                                                 |



##### GLOBAL_LOCKS

用于查看各节点各打开事务所持有的锁信息。

多了一个node_name字段，其余字段同上。

| **名称**  | **类型** | **描述**         |
| :-------- | :------- | :--------------- |
| node_name | name     | 数据库进程名称。 |



#### 13. Wait Events

##### WAIT_EVENTS

显示当前节点的event的等待相关的统计信息

| **名称**        | **类型**                 | **描述**                     |
| :-------------- | :----------------------- | :--------------------------- |
| nodename        | text                     | 数据库进程名称。             |
| type            | text                     | event类型。                  |
| event           | text                     | event名称。                  |
| wait            | bigint                   | 等待次数。                   |
| failed_wait     | bigint                   | 失败的等待次数。             |
| total_wait_time | bigint                   | 总等待时间（单位：微秒）。   |
| avg_wait_time   | bigint                   | 平均等待时间（单位：微秒）。 |
| max_wait_time   | bigint                   | 最大等待时间（单位：微秒）。 |
| min_wait_time   | bigint                   | 最小等待时间（单位：微秒）。 |
| last_updated    | timestamp with time zone | 最后一次更新该事件的时间。   |



##### GLOBAL_WAIT_EVENTS

显示各节点的event的等待相关的统计信息。

字段同上。



#### 14. Configuration

##### CONFIG_SETTINGS

显示数据库运行时参数的相关信息。

| **名称**   | **类型** | **描述**                                                     |
| :--------- | :------- | :----------------------------------------------------------- |
| name       | text     | 参数名称。                                                   |
| setting    | text     | 参数当前值。                                                 |
| unit       | text     | 参数的隐式结构。                                             |
| category   | text     | 参数的逻辑组。                                               |
| short_desc | text     | 参数的简单描述。                                             |
| extra_desc | text     | 参数的详细描述。                                             |
| context    | text     | 设置参数值的上下文，包括internal、postmaster、sighup、backend、superuser、user。 |
| vartype    | text     | 参数类型，包括bool、enum、integer、real、string。            |
| source     | text     | 参数的赋值方式。                                             |
| min_val    | text     | 参数最大值。如果参数类型不是数值型，那么该字段值为null。     |
| max_val    | text     | 参数最小值。如果参数类型不是数值型，那么该字段值为null。     |
| enumvals   | text[]   | enum类型参数合法值。如果参数类型不是enum型，那么该字段值为null。 |
| boot_val   | text     | 数据库启动时参数默认值。                                     |
| reset_val  | text     | 数据库重置时参数默认值。                                     |
| sourcefile | text     | 设置参数值的配置文件。如果参数不是通过配置文件赋值，那么该字段值为null。 |
| sourceline | integer  | 设置参数值的配置文件的行号。如果参数不是通过配置文件赋值，那么该字段值为null。 |



##### GLOBAL_CONFIG_SETTINGS

显示各节点数据库运行时参数的相关信息。

多了一个node_name字段，其余字段同上。

| **名称**  | **类型** | **描述**         |
| :-------- | :------- | :--------------- |
| node_name | name     | 数据库进程名称。 |



#### 15. Operator

##### OPERATOR_HISTORY_TABLE

显示执行作业结束后的算子相关的记录。此数据是从内核中转储到系统表中的数据。

| 名称                | 类型                     | 描述                                                         |
| :------------------ | :----------------------- | :----------------------------------------------------------- |
| queryid             | bigint                   | 语句执行使用的内部query_id。                                 |
| pid                 | bigint                   | 后端线程id。                                                 |
| plan_node_id        | integer                  | 查询对应的执行计划的plan node id。                           |
| plan_node_name      | text                     | 对应于plan_node_id的算子的名称。                             |
| start_time          | timestamp with time zone | 该算子处理第一条数据的开始时间。                             |
| duration            | bigint                   | 该算子到结束时候总的执行时间（ms）。                         |
| query_dop           | integer                  | 当前算子执行时的并行度。                                     |
| estimated_rows      | bigint                   | 优化器估算的行数信息。                                       |
| tuple_processed     | bigint                   | 当前算子返回的元素个数。                                     |
| min_peak_memory     | integer                  | 当前算子在数据库节点上的最小内存峰值（MB）。                 |
| max_peak_memory     | integer                  | 当前算子在数据库节点上的最大内存峰值（MB）。                 |
| average_peak_memory | integer                  | 当前算子在数据库节点上的平均内存峰值（MB）。                 |
| memory_skew_percent | integer                  | 当前算子在数据库节点间的内存使用倾斜率。                     |
| min_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最小数据量（MB），默认为0。    |
| max_spill_size      | integer                  | 若发生下盘，数据库节点上下盘的最大数据量（MB），默认为0。    |
| average_spill_size  | integer                  | 若发生下盘，数据库节点上下盘的平均数据量（MB），默认为0。    |
| spill_skew_percent  | integer                  | 若发生下盘，数据库节点间下盘倾斜率。                         |
| min_cpu_time        | bigint                   | 该算子在数据库节点上的最小执行时间（ms）。                   |
| max_cpu_time        | bigint                   | 该算子在数据库节点上的最大执行时间（ms）。                   |
| total_cpu_time      | bigint                   | 该算子在数据库节点上的总执行时间（ms）。                     |
| cpu_skew_percent    | integer                  | 数据库节点间执行时间的倾斜率。                               |
| warning             | text                     | 主要显示如下几类告警信息：Sort/SetOp/HashAgg/HashJoin spill。Spill file size large than 256MB。Broadcast size large than 100MB。Early spill。Spill times is greater than 3。Spill on memory adaptive。Hash table conflict。 |



##### OPERATOR_HISTORY

显示的是当前用户数据库主节点上执行作业结束后的算子的相关记录。

字段同上。



##### OPERATOR_RUNTIME

显示当前用户正在执行的作业的算子相关信息。

字段同上。



##### GLOBAL_OPERATOR_HISTORY

显示的是当前用户在数据库主节点上执行作业结束后的算子的相关记录。

字段同上。



##### GLOBAL_OPERATOR_HISTORY_TABLE

GLOBAL_OPERATOR_HISTORY_TABLE视图显示数据库主节点执行作业结束后的算子相关的记录。此数据是从内核中转储到系统表GS_WLM_OPERATOR_INFO中的数据。该视图是查询数据库主节点系统表GS_WLM_OPERATOR_INFO的汇聚视图。

字段同上。



##### GLOBAL_OPERATOR_RUNTIME

显示当前用户在数据库主节点上正在执行的作业的算子相关信息。

字段同上。



#### 16. Workload Manager

##### WLM_USER_RESOURCE_CONFIG

显示用户的资源配置信息。

| 名称       | 类型    | 描述             |
| :--------- | :------ | :--------------- |
| userid     | oid     | 用户oid。        |
| username   | name    | 用户名称。       |
| sysadmin   | boolean | 是否是sysadmin。 |
| rpoid      | oid     | 资源池的oid。    |
| respool    | name    | 资源池的名称。   |
| parentid   | oid     | 父用户的oid。    |
| totalspace | bigint  | 占用总空间大小。 |
| spacelimit | bigint  | 空间大上限。     |
| childcount | integer | 子用户数量。     |
| childlist  | text    | 子用户的列表。   |



##### WLM_USER_RESOURCE_RUNTIME

显示所有用户资源使用情况，需要使用管理员用户进行查询。此视图在GUC参数“use_workload_manager”为“on”时才有效。

| 名称              | 类型    | 描述                                                         |
| :---------------- | :------ | :----------------------------------------------------------- |
| username          | name    | 用户名。                                                     |
| used_memory       | integer | 正在使用的内存大小，单位MB。                                 |
| total_memory      | integer | 可以使用的内存大小，单位MB。值为0表示未限制最大可用内存，其限制取决于数据库最大可用内存。 |
| used_cpu          | integer | 正在使用的CPU核数。                                          |
| total_cpu         | integer | 在该机器节点上，用户关联控制组的CPU核数总和。                |
| used_space        | bigint  | 已使用的存储空间大小，单位KB。                               |
| total_space       | bigint  | 可使用的存储空间大小，单位KB，值为-1表示未限制最大存储空间。 |
| used_temp_space   | bigint  | 已使用的临时空间大小（预留字段，暂未使用），单位KB。         |
| total_temp_space  | bigint  | 可使用的临时空间大小（预留字段，暂未使用），单位KB，值为-1表示未限制最大临时存储空间。 |
| used_spill_space  | bigint  | 已使用的下盘空间大小（预留字段，暂未使用），单位KB。         |
| total_spill_space | bigint  | 可使用的下盘空间大小（预留字段，暂未使用），单位KB，值为-1表示未限制最大下盘空间。 |
